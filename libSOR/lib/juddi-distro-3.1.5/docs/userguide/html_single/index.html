<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">jUDDI User Guide</title><link rel="stylesheet" type="text/css" href="css/jbossorg.css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.76.1"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="description" content="This document is a User Guide for jUDDI. jUDDI (pronounced &#34;Judy&#34;) is an open source Java implementation of the Universal Description, Discovery, and Integration (UDDI v3) specification for Web Services."/></head><body><div class="book" title="jUDDI User Guide"><div class="titlepage"><div><p id="title"><a href="http://juddi.apache.org/" class="site_href"><strong>Apache jUDDI</strong></a><a href="http://juddi.apache.org/docs.html" class="doc_href"><strong>Community Documentation</strong></a></p><div><h1 class="title"><a id="d0e2"/>jUDDI User Guide</h1></div><div><h2 class="subtitle">A guide to using jUDDI</h2></div><div><h3 class="corpauthor">
		<span class="inlinemediaobject"><object type="image/svg+xml" data="Common_Content/images/title_logo.svg"/></span>
	</h3></div><div><div xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="authorgroup"><div class="authors">by <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Tom</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Cunningham</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Kurt</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Stam</span>, <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Jeff</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Faath</span>, and <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">The jUDDI Community</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname"/></div><div class="editors"/><div class="others">and thanks to <span xmlns="http://www.w3.org/1999/xhtml" class="firstname">Darrin</span> <span xmlns="http://www.w3.org/1999/xhtml" class="surname">Mison</span></div></div></div><div><p class="copyright">Copyright © 2009 jUDDI Community.</p></div><div><a href="ln-d0e35.html">Legal Notice</a></div><div><div class="abstract" title="Abstract"><p class="title"><strong>Abstract</strong></p><p>
        This document is a User Guide for jUDDI. jUDDI (pronounced "Judy") is an open
        source Java implementation of the Universal Description, Discovery, and
        Integration (UDDI v3) specification for Web Services.
		</p></div></div></div><hr/></div><div class="toc"><dl><dt><span class="preface"><a href="#User_Guide-Preface">Preface</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e89">1. Document Conventions</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e99">1.1. Typographic Conventions</a></span></dt><dt><span class="section"><a href="#d0e315">1.2. Pull-quote Conventions</a></span></dt><dt><span class="section"><a href="#d0e334">1.3. Notes and Warnings</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e355">2. We Need Feedback!</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-UDDI_Registry">1. UDDI Registry</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-UDDI_Registry-intro">1.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-UDDI_Registry">1.2. UDDI Registry</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Getting_Started">2. Getting Started</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-what_should_I_download">2.1. What Should I Download?</a></span></dt><dt><span class="section"><a href="#sect-using_the_jar">2.2. Using the JAR</a></span></dt><dt><span class="section"><a href="#sect-using_the_WAR_file">2.3. Using the WAR File</a></span></dt><dt><span class="section"><a href="#sect-using_the_tomcat_bundle">2.4. Using the Tomcat Bundle</a></span></dt><dt><span class="section"><a href="#sect-Using_jUDDI_webservices">2.5. Using jUDDI Web Services</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Authentication">3. Authentication</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-authentication_intro">3.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-jUDDI_Authentication">3.2. jUDDI Authentication</a></span></dt><dt><span class="section"><a href="#sect-XMLDocAuthentication">3.3. XMLDocAuthentication</a></span></dt><dt><span class="section"><a href="#sect-CryptedXMLDocAuthentication">3.4. CryptedXMLDocAuthentication</a></span></dt><dt><span class="section"><a href="#sect-LDAP_Authentication">3.5. LDAP Authentication</a></span></dt><dt><span class="section"><a href="#sect-JBoss_Authentication">3.6. JBoss Authentication</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-database_setup">4. Database Setup</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-derby_OOB">4.1. Derby Out-of-the-Box</a></span></dt><dt><span class="section"><a href="#sect-switch_to_mysql">4.2. Switch to MySQL</a></span></dt><dt><span class="section"><a href="#sect-switch_to_postres">4.3. Switch to Postgres</a></span></dt><dt><span class="section"><a href="#sect-switch_to_oracle">4.4. Switch to Oracle</a></span></dt><dt><span class="section"><a href="#sect-switch_to_hsql">4.5. Switch to HSQL</a></span></dt><dt><span class="section"><a href="#sect-switch_to_other_DB">4.6. Switch to &lt;other db&gt;</a></span></dt><dt><span class="section"><a href="#sect-persistence_props">4.7. Override persistence properties in the juddiv3.properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-root_seed_data">5. Root Seed Data</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-root_seed_data_intro">5.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-seed_data_files">5.2. Seed Data Files</a></span></dt><dt><span class="section"><a href="#sect-tokens_in_the_seed_data">5.3. Token in the Seed Data</a></span></dt><dt><span class="section"><a href="#sect-custom_seed_data">5.4. Customer Seed Data</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-jUDDI_Configuration">6. jUDDI_Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-config_Introduction">6.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-config_authentication">6.2. Authentication</a></span></dt><dt><span class="section"><a href="#sect-startup">6.3. Startup</a></span></dt><dt><span class="section"><a href="#sect-config_queries">6.4. Queries</a></span></dt><dt><span class="section"><a href="#sect-config_proxy">6.5. Proxy Settings</a></span></dt><dt><span class="section"><a href="#sect-config_keygeneration">6.6. KeyGeneration</a></span></dt><dt><span class="section"><a href="#sect-config_subscription">6.7. Subscription</a></span></dt><dt><span class="section"><a href="#sect-config_transfer">6.8. Transfer</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Using_jUDDI-Client">7. Using the jUDDI-Client</a></span></dt><dd><dl><dt><span class="sect1"><a href="#sect-jUDDI_Client_intro">7.1. Introduction</a></span></dt><dt><span class="sect1"><a href="#sect-configuration">7.2. Configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#sect-JAX-SW_transport">7.2.1. JAX-WS Transport</a></span></dt><dt><span class="sect2"><a href="#sect-RMI_transport">7.2.2. RMI Transport</a></span></dt><dt><span class="sect2"><a href="#sect-InVM_transport">7.2.3. InVM Transport</a></span></dt></dl></dd><dt><span class="sect1"><a href="#chap-UDDI_annotations">7.3. UDDI Annotations</a></span></dt><dd><dl><dt><span class="sect2"><a href="#sect-intro_annotations">7.3.1. Introduction</a></span></dt><dt><span class="sect2"><a href="#sect-UDDIService">7.3.2. UDDIService Annotation</a></span></dt><dt><span class="sect2"><a href="#sect-UDDIServiceBinding">7.3.3. UDDIServiceBinding Annotation</a></span></dt><dt><span class="sect2"><a href="#sect-WebServiceExample">7.3.4. WebService Example</a></span></dt><dt><span class="sect2"><a href="#d0e1804">7.3.5. Templating keys</a></span></dt></dl></dd><dt><span class="sect1"><a href="#sect-programmatic">7.4. Programmatic use</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e1817">7.4.1. WSDL Registration</a></span></dt><dt><span class="sect2"><a href="#d0e1839">7.4.2. BPEL Process Registration</a></span></dt><dt><span class="sect2"><a href="#d0e1853">7.4.3. Conventions around UDDIv3 registration</a></span></dt></dl></dd><dt><span class="sect1"><a href="#sect-service-lookup">7.5. Dynamic UDDI Service Lookup</a></span></dt><dt><span class="sect1"><a href="#sect-dependencies">7.6. Dependencies</a></span></dt><dt><span class="sect1"><a href="#sect-sample_code">7.7. Sample Code</a></span></dt><dt><span class="sect1"><a href="#sect-references">7.8. References</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-SimplePublish">8. Simple Publishing Using the jUDDI API</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2131">8.1. UDDI Data Model</a></span></dt><dt><span class="section"><a href="#d0e2157">8.2. jUDDI Additions to the Model</a></span></dt><dt><span class="section"><a href="#d0e2170">8.3. UDDI and jUDDI API</a></span></dt><dt><span class="section"><a href="#d0e2208">8.4. Getting Started</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2216">8.4.1. Simple Publishing Example</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e2258">8.5. Conclusion</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Subscription">9. Subscription</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-subscription_intro">9.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-Two_node_example">9.2. Two node example setup: Sales and Marketing</a></span></dt><dt><span class="section"><a href="#sect-deploy_HelloSales_service">9.3. Deploy the HelloSales Service</a></span></dt><dt><span class="section"><a href="#sect-config_user_create_subscription">9.4. Configure a user to create Subscriptions</a></span></dt><dt><span class="section"><a href="#sect-synchronous_notifications">9.5. Synchronous Notifications</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Administration">10. Administration</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-admin_intro">10.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-changing_listener_port">10.2. Changing the Listener Port</a></span></dt><dt><span class="section"><a href="#sect-changing_oracle_sequence_name">10.3. Changing the Oracle Sequence name</a></span></dt><dt><span class="section"><a href="#sect-persistence">10.4. Persistence</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-deployjboss">11. Deploying to JBoss 6.0.0.GA</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-deployjboss">11.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-juddi-war">11.2. Add juddiv3.war</a></span></dt><dt><span class="section"><a href="#sect-web.xml">11.3. Change web.xml</a></span></dt><dt><span class="section"><a href="#sect-datasource">11.4. Configure Datasource</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-deployglassfish">12. Deploying to Glassfish 2.1.1</a></span></dt><dd><dl><dt><span class="section"><a href="#sect-deployglassfish">12.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-glassfish-jars">12.2. Glassfish jars</a></span></dt><dt><span class="section"><a href="#sect-juddi-ds">12.3. Configure the JUDDI datasource</a></span></dt><dt><span class="section"><a href="#sect-glassfish-juddi-war">12.4. Add juddiv3-cxf.war</a></span></dt><dt><span class="section"><a href="#sect-run">12.5. Run juddi</a></span></dt></dl></dd><dt><span class="appendix"><a href="#appe-Publican-Revision_History">A. Revision History</a></span></dt></dl></div><div class="preface" title="Preface"><div class="titlepage"><div><div><h2 class="title"><a id="User_Guide-Preface"/>Preface</h2></div></div></div><div xml:lang="en-US" class="section" title="1. Document Conventions"><div class="titlepage"><div><div><h2 class="title"><a id="d0e89"/>1. Document Conventions</h2></div></div></div><p>
	This manual uses several conventions to highlight certain words and phrases and draw
    attention to specific pieces of information.
    </p><p>
	In PDF and paper editions, this manual uses typefaces drawn from the 
	<a class="ulink" href="https://fedorahosted.org/liberation-fonts/">Liberation Fonts</a> set. 
	The Liberation Fonts set is also used in HTML editions if the set is installed on your
    system. If not, alternative but equivalent typefaces are displayed. Note: Red Hat
    Enterprise Linux 5 and later includes the Liberation Fonts set by default.
	</p><div class="section" title="1.1. Typographic Conventions"><div class="titlepage"><div><div><h3 class="title"><a id="d0e99"/>1.1. Typographic Conventions</h3></div></div></div><p>
		Four typographic conventions are used to call attention to specific words and
        phrases. These conventions, and the circumstances they apply to, are as follows.
		</p><p>
		<code class="literal">Mono-spaced Bold</code>
		</p><p>
		Used to highlight system input, including shell commands, file names and paths.
        Also used to highlight key caps and key-combinations. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
			To see the contents of the file <code class="filename">my_next_bestselling_novel</code>
            in your current working directory, enter the <code class="command">cat
            my_next_bestselling_novel</code> command at the shell prompt and press
            <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</p></blockquote></div><p>
		The above includes a file name, a shell command and a key cap, all presented in
        Mono-spaced Bold and all distinguishable thanks to context.
		</p><p>
		Key-combinations can be distinguished from key caps by the hyphen connecting each
        part of a key-combination. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
			Press <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</p><p>
			Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F1</strong></span> to switch to the first virtual terminal. Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F7</strong></span> to return to your X-Windows session.
			</p></blockquote></div><p>
		The first sentence highlights the particular key cap to press. The second
        highlights two sets of three key caps, each set pressed simultaneously.
		</p><p>
		If source code is discussed, class names, methods, functions, variable names and
        returned values mentioned within a paragraph will be presented as above, in
        <code class="literal">Mono-spaced Bold</code>. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
			File-related classes include <code class="classname">filesystem</code> for file
            systems, <code class="classname">file</code> for files, and <code class="classname">dir</code>
            for directories. Each class has its own associated set of permissions.
			</p></blockquote></div><p>
		<span class="application"><strong>Proportional Bold</strong></span>
		</p><p>
		This denotes words or phrases encountered on a system, including application
        names; dialogue box text; labelled buttons; check-box and radio button labels;
        menu titles and sub-menu titles. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
			Choose <span class="guimenu"><strong>System &gt; Preferences &gt; Mouse</strong></span> from the main
            menu bar to launch <span class="application"><strong>Mouse Preferences</strong></span>. In the
            <span class="guilabel"><strong>Buttons</strong></span> tab, click the <span class="guilabel"><strong>Left-handed
            mouse</strong></span> check box and click <span class="guibutton"><strong>Close</strong></span> to switch
            the primary mouse button from the left to the right (making the mouse suitable
            for use in the left hand).
			</p><p>
			To insert a special character into a <span class="application"><strong>gedit</strong></span> file,
            choose <span class="guimenu"><strong>Applications &gt; Accessories &gt; Character Map</strong></span>
            from the main menu bar. Next, choose <span class="guimenu"><strong>Search &gt;
            Find</strong></span> from the <span class="application"><strong>Character Map</strong></span> menu
            bar, type the name of the character in the <span class="guilabel"><strong>Search</strong></span> field
            and click <span class="guibutton"><strong>Next</strong></span>. The character you sought will be
            highlighted in the <span class="guilabel"><strong>Character Table</strong></span>. Double-click this
            highlighted character to place it in the <span class="guilabel"><strong>Text to copy</strong></span>
            field and then click the <span class="guibutton"><strong>Copy</strong></span> button. Now switch back
            to your document and choose <span class="guimenu"><strong>Edit &gt; Paste</strong></span> from the
            <span class="application"><strong>gedit</strong></span> menu bar.
			</p></blockquote></div><p>
		The above text includes application names; system-wide menu names and items;
        application-specific menu names; and buttons and text found within a GUI
        interface, all presented in Proportional Bold and all distinguishable by context.
		</p><p>
		Note the <span class="guimenu"><strong>&gt;</strong></span> shorthand used to indicate traversal through a
        menu and its sub-menus. This is to avoid the difficult-to-follow 'Select
        <span class="guimenuitem"><strong>Mouse</strong></span> from the <span class="guimenu"><strong>Preferences</strong></span> sub-menu
        in the <span class="guimenu"><strong>System</strong></span> menu of the main menu bar' approach.
		</p><p>
		<code class="command"><em class="replaceable"><code>Mono-spaced Bold Italic</code></em></code> or
        <span class="application"><strong><em class="replaceable"><code>Proportional Bold Italic</code></em></strong></span>
		</p><p>
		Whether Mono-spaced Bold or Proportional Bold, the addition of Italics indicates
        replaceable or variable text. Italics denotes text you do not input literally or
        displayed text that changes depending on circumstance. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
				To connect to a remote machine using ssh, type <code class="command">ssh <em class="replaceable"><code>username</code></em>@<em class="replaceable"><code>domain.name</code></em></code> at a shell prompt. If the remote machine is <code class="filename">example.com</code> and your username on that machine is john, type <code class="command">ssh john@example.com</code>.
			</p><p>
				The <code class="command">mount -o remount <em class="replaceable"><code>file-system</code></em></code> command remounts the named file system. For example, to remount the <code class="filename">/home</code> file system, the command is <code class="command">mount -o remount /home</code>.
			</p><p>
				To see the version of a currently installed package, use the <code class="command">rpm -q <em class="replaceable"><code>package</code></em></code> command. It will return a result as follows: <code class="command"><em class="replaceable"><code>package-version-release</code></em></code>.
			</p></blockquote></div><p>
			Note the words in bold italics above  username, domain.name, file-system, package, version and release. Each word is a placeholder, either for text you enter when issuing a command or for text displayed by the system.
		</p><p>
			Aside from standard usage for presenting the title of a work, italics denotes the first use of a new and important term. For example:
		</p><div class="blockquote"><blockquote class="blockquote"><p>
				When the Apache HTTP Server accepts requests, it dispatches child processes or threads to handle them. This group of child processes or threads is known as a <em class="firstterm">server-pool</em>. Under Apache HTTP Server 2.0, the responsibility for creating and maintaining these server-pools has been abstracted to a group of modules called <em class="firstterm">Multi-Processing Modules</em> (<em class="firstterm">MPMs</em>). Unlike other modules, only one module from the MPM group can be loaded by the Apache HTTP Server.
			</p></blockquote></div></div><div class="section" title="1.2. Pull-quote Conventions"><div class="titlepage"><div><div><h3 class="title"><a id="d0e315"/>1.2. Pull-quote Conventions</h3></div></div></div><p>
			Two, commonly multi-line, data types are set off visually from the surrounding text.
		</p><p>
			Output sent to a terminal is set in <code class="computeroutput">Mono-spaced Roman</code> and presented thus:
		</p><pre class="screen">
books        Desktop   documentation  drafts  mss    photos   stuff  svn
books_tests  Desktop1  downloads      images  notes  scripts  svgs
</pre><p>
			Source-code listings are also set in <code class="computeroutput">Mono-spaced Roman</code> but are presented and highlighted as follows:
		</p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_keyword">package</span><span class="java_plain">&nbsp;org</span><span class="java_separator">.</span><span class="java_plain">jboss</span><span class="java_separator">.</span><span class="java_plain">book</span><span class="java_separator">.</span><span class="java_plain">jca</span><span class="java_separator">.</span><span class="java_plain">ex1</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">import</span><span class="java_plain">&nbsp;javax</span><span class="java_separator">.</span><span class="java_plain">naming</span><span class="java_separator">.</span><span class="java_type">InitialContext</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">ExClient</span>
<!--  --><br/><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">static</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;main</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;args</span><span class="java_separator">[])</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">throws</span><span class="java_plain">&nbsp;</span><span class="java_type">Exception</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">InitialContext</span><span class="java_plain">&nbsp;iniCtx&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">InitialContext</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Object</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ref&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;iniCtx</span><span class="java_separator">.</span><span class="java_plain">lookup</span><span class="java_separator">(</span><span class="java_literal">&quot;EchoBean&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">EchoHome</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;home&nbsp;&nbsp;&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">EchoHome</span><span class="java_separator">)</span><span class="java_plain">&nbsp;ref</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Echo</span><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&nbsp;&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;home</span><span class="java_separator">.</span><span class="java_plain">create</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">System</span><span class="java_separator">.</span><span class="java_plain">out</span><span class="java_separator">.</span><span class="java_plain">println</span><span class="java_separator">(</span><span class="java_literal">&quot;Created&nbsp;Echo&quot;</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">System</span><span class="java_separator">.</span><span class="java_plain">out</span><span class="java_separator">.</span><span class="java_plain">println</span><span class="java_separator">(</span><span class="java_literal">&quot;Echo.echo('Hello')&nbsp;=&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;echo</span><span class="java_separator">.</span><span class="java_plain">echo</span><span class="java_separator">(</span><span class="java_literal">&quot;Hello&quot;</span><span class="java_separator">));</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_separator">}</span>
</pre></div><div class="section" title="1.3. Notes and Warnings"><div class="titlepage"><div><div><h3 class="title"><a id="d0e334"/>1.3. Notes and Warnings</h3></div></div></div><p>
			Finally, we use three visual styles to draw attention to information that might otherwise be overlooked.
		</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>Note</h2><p>
				A Note is a tip or shortcut or alternative approach to the task at hand. Ignoring a note should have no negative consequences, but you might miss out on a trick that makes your life easier.
			</p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="important"><h2>Important</h2><p>
				Important boxes detail things that are easily missed: configuration changes that only apply to the current session, or services that need restarting before an update will apply. Ignoring Important boxes won't cause data loss but may cause irritation and frustration.
			</p></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>
				A Warning should not be ignored. Ignoring warnings will most likely cause data loss.
			</p></div></div></div><div class="section" title="2. We Need Feedback!"><div class="titlepage"><div><div><h2 class="title"><a id="d0e355"/>2. We Need Feedback!</h2></div></div></div><p>
	If you find a typographical error in this manual, or if you have thought of a way
    to make this manual better, we would love to hear from you! 
	</p><p>
	For any issues you find, or improvements you have, please sign up for a JIRA account at https://issues.apache.org/jira/secure/Dashboard.jspa and file a bug under the "jUDDI" component.
	</p><p>
    If you have a suggestion for improving the documentation, try to be as specific as
    possible when describing it. If you have found an error, please include the section number
    and some of the surrounding text so we can find it easily.
	</p></div></div><div class="chapter" title="Chapter 1. UDDI Registry"><div class="titlepage"><div><div><h2 class="title"><a id="chap-UDDI_Registry"/>Chapter 1. UDDI Registry</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-UDDI_Registry-intro">1.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-UDDI_Registry">1.2. UDDI Registry</a></span></dt></dl></div><div class="section" title="1.1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="sect-UDDI_Registry-intro"/>1.1. Introduction</h2></div></div></div><p>
        The Universal Description, Discovery and Integration (UDDI) protocol is one of the
        major building blocks required for successful Web services. UDDI creates a standard
        interoperable platform that enables companies and applications to quickly, easily, and
        dynamically find and use Web services over the Internet. UDDI also allows operational
        registries to be maintained for different purposes in different contexts. UDDI is a
        cross-industry effort driven by major platform and software providers, as well as
        marketplace operators and e-business leaders within the OASIS standards consortium.
        UDDI has gone through 3 revisions and the latest version is 3.0.2. Additional
        information regarding UDDI can be found at <a class="ulink" href="http://uddi.xml.org">http://uddi.xml.org</a>.
        </p></div><div class="section" title="1.2. UDDI Registry"><div class="titlepage"><div><div><h2 class="title"><a id="sect-UDDI_Registry"/>1.2. UDDI Registry</h2></div></div></div><p>
        The UDDI Registry implements the UDDI specification. UDDI is a Web-based distributed
        directory that enables businesses to list themselves on the Internet and discover each
        other, similar to a traditional phone book's yellow and white pages. The UDDI registry
        is both a white pages business directory and a technical specifications library. The
        Registry is designed to store information about Businesses and Services and it holds
        references to detailed documentation.
        </p><div class="figure"><a id="fig-UDDI_Registry_Invocation_Pattern"/><div class="figure-contents"><div class="mediaobject"><img src="images/UDDI_Registry_invocation_pattern.png" alt="Invocation Pattern using the UDDI Registry"/></div></div><p class="title"><strong>Figure 1.1. Invocation Pattern using the UDDI Registry</strong></p></div><br class="figure-break"/><p>
        A business publishes services to the UDDI registry. A client looks up the service in
        the registry and receives service binding information. The client then uses the binding
        information to invoke the service. The UDDI APIs are SOAP based for interoperability
        reasons. The UDDI v3 specification defines 9 APIs:
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="orderedlist"><ol><li class="listitem"><p>
                <code class="classname">UDDI_Security_PortType</code>, defines the API to obtain a
                security token. With a valid security token a publisher can publish to the
                registry. A security token can be used for the entire session.
                </p></li><li class="listitem"><p>
                <code class="classname">UDDI_Publication_PortType</code>, defines the API to publish
                business and service information to the UDDI registry.
                </p></li><li class="listitem"><p>
                <code class="classname">UDDI_Inquiry_PortType</code>, defines the API to query the
                UDDI registry. Typically this API does not require a security token.
                </p></li><li class="listitem"><p>
                <code class="classname">UDDI_CustodyTransfer_PortType</code>, this API can be used to
                transfer the custody of a business from one UDDI node to another.
                </p></li><li class="listitem"><p>
                <code class="classname">UDDI_Subscription_PortType</code>, defines the API to
                register for updates on a particular business of service.
                </p></li><li class="listitem"><p>
                <code class="classname">UDDI_SubscriptionListener_PortType</code>, defines the API a
                client must implement to receive subscription notifications from a UDDI node.
                </p></li><li class="listitem"><p>
                <code class="classname">UDDI_Replication_PortType</code>, defines the API to replicate
                registry data between UDDI nodes.
                </p></li><li class="listitem"><p>
                <code class="classname">UDDI_ValueSetValidation_PortType</code>, by nodes to allow
                external providers of value set validation. Web services to assess whether
                keyedReferences or keyedReferenceGroups are valid.
                </p></li><li class="listitem"><p>
                <code class="classname">UDDI_ValueSetCaching_PortType</code>, UDDI nodes may perform
                validation of publisher references themselves using the cached values obtained
                from such a Web service.
                </p></li></ol></div></div></div><div class="chapter" title="Chapter 2. Getting Started"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Getting_Started"/>Chapter 2. Getting Started</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-what_should_I_download">2.1. What Should I Download?</a></span></dt><dt><span class="section"><a href="#sect-using_the_jar">2.2. Using the JAR</a></span></dt><dt><span class="section"><a href="#sect-using_the_WAR_file">2.3. Using the WAR File</a></span></dt><dt><span class="section"><a href="#sect-using_the_tomcat_bundle">2.4. Using the Tomcat Bundle</a></span></dt><dt><span class="section"><a href="#sect-Using_jUDDI_webservices">2.5. Using jUDDI Web Services</a></span></dt></dl></div><div class="section" title="2.1. What Should I Download?"><div class="titlepage"><div><div><h2 class="title"><a id="sect-what_should_I_download"/>2.1. What Should I Download?</h2></div></div></div><p>
        The jUDDI server deploys as a WebARchive (war) named <code class="filename">juddiv3.war</code>. Within jUDDI,
        there are three downloadable files (<code class="filename">juddi-core.jar</code>, <code class="filename">juddi.war</code>, and
        <code class="filename">juddi-tomcat.zip</code>). You should determine which one to use depending on what level
        of integration you want with your application and your platform / server choices.
        </p><p>
        JUDDI also ships with client side code, the <code class="filename">juddi-client.jar</code>. The jUDDI server
        depends on the <code class="filename">juddi-client.jar</code> in situations where one server communicates to
        another server. In this setup one server acts as a client to the other server. The
        juddi-client.
        </p></div><div class="section" title="2.2. Using the JAR"><div class="titlepage"><div><div><h2 class="title"><a id="sect-using_the_jar"/>2.2. Using the JAR</h2></div></div></div><p>
        The juddi-core module produces a JAR which contains the jUDDI source and a jUDDI
        persistence.xml configuration. jUDDI's persistence is being actively tested with
        both OpenJPA and with Hibernate. If you are going to use only the JAR, you would
        need to directly insert objects into jUDDI through the database back end or
        persistence layer, or configure your own Web Service provider with the provided
        WSDL files and classes.
        </p></div><div class="section" title="2.3. Using the WAR File"><div class="titlepage"><div><div><h2 class="title"><a id="sect-using_the_WAR_file"/>2.3. Using the WAR File</h2></div></div></div><p>
        As with the JAR, you need to make a decision on what framework you would like to
        use when building the WAR. jUDDI's architecture supports any JAX-WS compliant WS
        stack (Axis, CXF, etc). The jUDDI 3.0.GA release ships with CXF in the Tomcat
        bundle, but any docs or descriptors to support other WS stacks would be welcome
        contributions. Simply copy the WAR to the deploy folder of your server (this
        release has been tested under Apache Tomcat 6.0.20), start your server, and follow
        the directions under “using jUDDI as a Web Service”.
        </p></div><div class="section" title="2.4. Using the Tomcat Bundle"><div class="titlepage"><div><div><h2 class="title"><a id="sect-using_the_tomcat_bundle"/>2.4. Using the Tomcat Bundle</h2></div></div></div><p>
        The jUDDI Tomcat bundle packages up the jUDDI WAR, Apache Derby, and a few
        necessary configuration files and provides the user with a pre-configured jUDDI
        instance. By default, Hibernate is used as the persistence layer and CXF is used
        as a Web Service framework. To get started using the Tomcat bundle, unzip the
        <code class="filename">juddi-tomcat-bundle.zip</code>, and start Tomcat :
        </p><pre class="screen">% cd apache-tomcat-6.0.20/bin
% ./startup.sh</pre><p>
        It is suggested that you use JDK 1.6 with the Tomcat 6 bundle. On Mac OS X you can
        either change your JAVA_HOME settings or use 
        <code class="filename">/Applications/Utilities/Java Preferences.app</code> to change your 
        current JDK.
        </p><p>
        Once the server is up and running can make sure the root data was properly
        installed by browsing to <a class="ulink" href="http://localhost:8080/juddiv3">http://localhost:8080/juddiv3</a>
        </p><p>
        You should see the screen show in <a class="xref" href="#fig-jUDDI_welcome" title="Figure 2.1. jUDDI Welcome Page">Figure 2.1, “jUDDI Welcome Page”</a>.
        </p><div class="figure"><a id="fig-jUDDI_welcome"/><div class="figure-contents"><div class="mediaobject"><img src="images/jUDDI_welcome.png" alt="jUDDI Welcome Page"/></div></div><p class="title"><strong>Figure 2.1. jUDDI Welcome Page</strong></p></div><br class="figure-break"/></div><div class="section" title="2.5. Using jUDDI Web Services"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Using_jUDDI_webservices"/>2.5. Using jUDDI Web Services</h2></div></div></div><p>
        Once the jUDDI server is started, you can inspect the UDDI WebService API by 
        browsing to <a class="ulink" href="http://localhost:8080/juddiv3/services">http://localhost:8080/juddiv3/services</a>
        </p><p>
        You should see an overview of all the Services and their WSDLs.
        </p><div class="figure"><a id="fig-UDDI_services_overview"/><div class="figure-contents"><div class="mediaobject"><img src="images/UDDI_services_overview.png" alt="UDDI Services Overview"/></div></div><p class="title"><strong>Figure 2.2. UDDI Services Overview</strong></p></div><br class="figure-break"/><p>
        The services page shows you the available endpoints and methods available. Using
        any SOAP client, you should be able to send some sample requests to jUDDI to test:
        </p><div class="figure"><a id="fig-getting_authToken_soapUI"/><div class="figure-contents"><div class="mediaobject"><img src="images/authToken_SoapUI.png" alt="Getting an authToken using SoapUI"/></div></div><p class="title"><strong>Figure 2.3. Getting an authToken using SoapUI</strong></p></div><br class="figure-break"/></div></div><div class="chapter" title="Chapter 3. Authentication"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Authentication"/>Chapter 3. Authentication</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-authentication_intro">3.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-jUDDI_Authentication">3.2. jUDDI Authentication</a></span></dt><dt><span class="section"><a href="#sect-XMLDocAuthentication">3.3. XMLDocAuthentication</a></span></dt><dt><span class="section"><a href="#sect-CryptedXMLDocAuthentication">3.4. CryptedXMLDocAuthentication</a></span></dt><dt><span class="section"><a href="#sect-LDAP_Authentication">3.5. LDAP Authentication</a></span></dt><dt><span class="section"><a href="#sect-JBoss_Authentication">3.6. JBoss Authentication</a></span></dt></dl></div><div class="section" title="3.1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="sect-authentication_intro"/>3.1. Introduction</h2></div></div></div><p>
        In order to enforce proper write access to jUDDI, each request to jUDDI needs a
        valid <code class="classname">authToken</code>. Note that read access is not restricted
        and therefore queries into the registries are not restricted.
        </p><p>
        To obtain a valid <code class="classname">authToken</code> a
        <code class="methodname">getAuthToken()</code> request must be made, where a
        <code class="classname">GetAuthToken</code> object is passed. On the
        <code class="classname">GetAuthToken</code> object a <span class="property">userid</span> and
        <span class="property">credential</span> (password) needs to be set.
        </p><pre class="programlisting">org.uddi.api_v3.GetAuthToken ga = new org.uddi.api_v3.GetAuthToken();
ga.setUserID(pubId);
ga.setCred("");

org.uddi.api_v3.AuthToken token = securityService.getAuthToken(ga);</pre><p>
        The property <span class="property">juddi.authenticator</span> in the
        <code class="filename">juddi.properties</code> configuration file can be used to configure
        how jUDDI is going to check the credentials passed in on the
        <code class="classname">GetAuthToken</code> request. By default jUDDI uses the
        <code class="classname">JUDDIAuthenticator</code> implementation. You can provide your own
        authentication implementation or use any of the ones mention below. The
        implementation needs to implement the
        <code class="interfacename">org.apache.juddi.auth.Authenticator</code> interface, and
        <span class="property">juddi.authenticator</span> property should refer to the implementation class.
        </p><p>
        There are two phases involved in Authentication. The authenticate phase and the
        identify phase. Both of these phases are represented by a method in the
        <code class="interfacename">Authenticator</code> interface.
        </p><p>
        The authenticate phase occurs during the <code class="methodname">GetAuthToken</code>
        request as described above. The goal of this phase is to turn a user id and
        credentials into a valid publisher id. The publisher id (referred to as the
        “authorized name” in UDDI terminology) is the value that assigns ownership within
        UDDI. Whenever a new entity is created, it must be tagged with ownership by the
        authorized name of the publisher. The value of the publisher id can be completely
        transparent to jUDDI – the only requirement is that one exists to assign to new
        entities. Thus, the authenticate phase must return a non-null publisher id. Upon
        completion of the <code class="methodname">GetAuthToken</code> request, an authentication
        token is issued to the caller.
        </p><p>
        In subsequent calls to the UDDI API that require authentication, the token issued
        from the <code class="methodname">GetAuthToken</code> request must be provided. This
        leads to the next phase of jUDDI authentication – the identify phase.
        </p><p>
        The identify phase is responsible for turning the authentication token (or the
        publisher id associated with that authentication token) into a valid
        <code class="classname">UddiEntityPublisher</code> object. The
        <code class="classname">UddiEntityPublisher</code> object contains all the properties
        necessary to handle ownership of UDDI entities. Thus, the token (or publisher id)
        is used to “identify” the publisher.
        </p><p>
        The two phases provide compliance with the UDDI authentication structure and grant
        flexibility for users that wish to provide their own authentication mechanism.
        Handling of credentials and publisher properties can be done entirely outside of
        jUDDI. However, jUDDI provides the Publisher entity, which is a sub-class of
        <code class="classname">UddiEntityPublisher</code>, to persist publisher properties within
        jUDDI. This is used in the default authentication and is the subject of the next
        section.      
        </p></div><div class="section" title="3.2. jUDDI Authentication"><div class="titlepage"><div><div><h2 class="title"><a id="sect-jUDDI_Authentication"/>3.2. jUDDI Authentication</h2></div></div></div><p>
        The default authentication mechanism provided by jUDDI is the
        <code class="classname">JUDDIAuthenticator</code>. The authenticate phase of the
        <code class="classname">JUDDIAuthenticator</code> simply checks to see if the user id
        passed in has an associated record in the Publisher table. No credentials checks
        are made. If, during authentication, the publisher does not exist, it the
        publisher is added on the fly.
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>
            Do not use jUDDI authentication in production.
            </p></div><p>
        The identify phase uses the publisher id to retrieve the Publisher record and return
        it. All necessary publisher properties are populated as Publisher inherits from
        <code class="classname">UddiEntityPublisher</code>.
        </p><pre class="programlisting">juddi.authenticator = org.apache.juddi.auth.JUDDIAuthentication
</pre></div><div class="section" title="3.3. XMLDocAuthentication"><div class="titlepage"><div><div><h2 class="title"><a id="sect-XMLDocAuthentication"/>3.3. XMLDocAuthentication</h2></div></div></div><p>
        The <code class="classname">XMLDocAuthentication</code> implementation needs a XML file on
        the classpath. The <code class="filename">juddi.properties</code> file would need to look
        like
        </p><pre class="programlisting">juddi.authenticator = org.apache.juddi.auth.XMLDocAuthentication
juddi.usersfile = juddi-users.xml
</pre><p>
        where the name of the XML can be provided but it defaults to
        <code class="filename">juddi-users.xml</code>, and the content of the file would looks
        something like
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;juddi-users&gt;
    &lt;user userid="anou_mana" password="password" /&gt;
    &lt;user userid="bozo" password="clown" /&gt;
    &lt;user userid="sviens" password="password" /&gt;
&lt;/juddi-users&gt;</pre><p>
        The authenticate phase checks that the user id and password match a value in the
        XML file. The identify phase simply uses the user id to populate a new
        <code class="classname">UddiEntityPublisher</code>.
        </p></div><div class="section" title="3.4. CryptedXMLDocAuthentication"><div class="titlepage"><div><div><h2 class="title"><a id="sect-CryptedXMLDocAuthentication"/>3.4. CryptedXMLDocAuthentication</h2></div></div></div><p>
        The <code class="classname">CryptedXMLDocAuthentication</code> implementation is similar
        to the <code class="classname">XMLDocAuthentication</code> implementation, but the
        passwords are encrypted
        </p><pre class="programlisting">juddi.authenticator = org.apache.juddi.auth.CryptedXMLDocAuthentication
juddi.usersfile = juddi-users-encrypted.xml
juddi.cryptor = org.apache.juddi.cryptor.DefaultCryptor
</pre><p>
        where the name user credential file is
        <code class="filename">juddi-users-encrypted.xml</code>, and the content of the file would
        looks something like
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;juddi-users&gt;
    &lt;user userid="anou_mana" password="+j/kXkZJftwTFTBH6Cf6IQ=="/&gt;
    &lt;user userid="bozo" password="Na2Ait+2aW0="/&gt;
    &lt;user userid="sviens" password="+j/kXkZJftwTFTBH6Cf6IQ=="/&gt;
&lt;/juddi-users&gt;</pre><p>
        The <code class="classname">DefaultCryptor</code> implementation uses
        <code class="literal">BEWithMD5AndDES</code> and <code class="literal">Base64</code> to encrypt the
        passwords. Note that the code in the <code class="classname">AuthenticatorTest</code> can
        be used to learn more about how to use this Authenticator implementation. You can
        plugin your own encryption algorithm by implementing the
        <code class="interfacename">org.apache.juddi.cryptor.Cryptor</code> interface and
        referencing your implementation class in the <span class="property">juddi.cryptor</span>
        property.
        </p><p>
        The authenticate phase checks that the user id and password match a value in the XML
        file. The identify phase simply uses the user id to populate a new
        <code class="classname">UddiEntityPublisher</code>.
        </p></div><div class="section" title="3.5. LDAP Authentication"><div class="titlepage"><div><div><h2 class="title"><a id="sect-LDAP_Authentication"/>3.5. LDAP Authentication</h2></div></div></div><p>
	<code class="classname">LdapSimpleAuthenticator</code> provides a way of authenticating
	users using Ldap simple authentication.    It is fairly rudimentary and more 
	LDAP integration is planned in the future, but this class allows you to authenticate
	a user based on an LDAP prinicipal, provided that the principal and the juddi publisher ID
	are the same.
        </p><p>
        To use this class you must add the following properties to the
        <code class="filename">juddi.properties</code> file:
        </p><pre class="programlisting">juddi.authenticator=org.apache.juddi.auth.LdapSimpleAuthenticator
juddi.authenticator.url=ldap://localhost:389
</pre><p>
	The <code class="classname">juddi.authenticator.url</code> property configures the
        <code class="classname">LdapSimpleAuthenticator</code> class so that it knows where the LDAP
	server resides.     Future work is planned in this area to use the LDAP uid rather than
	the LDAP principal as the default publisher id.
        </p></div><div class="section" title="3.6. JBoss Authentication"><div class="titlepage"><div><div><h2 class="title"><a id="sect-JBoss_Authentication"/>3.6. JBoss Authentication</h2></div></div></div><p>
        Finally is it possible to hook up to third party credential stores. If for example
        jUDDI is deployed to the JBoss Application server it is possible to hook up to
        it's authentication machinery. The <code class="classname">JBossAuthenticator</code> class
        is provided in the <code class="filename">docs/examples/auth</code> directory. This class
        enables jUDDI deployments on JBoss use a server security domain to authenticate
        users.
        </p><p>
        To use this class you must add the following properties to the
        <code class="filename">juddi.properties</code> file:
        </p><pre class="programlisting">juddi.authenticator=org.apache.juddi.auth.JBossAuthenticator
juddi.securityDomain=java:/jaas/other
</pre><p>
        The <span class="property">juddi.authenticator</span> property plugs the
        <code class="classname">JbossAuthenticator</code> class into the jUDDI the Authenticator
        framework. The <code class="classname">juddi.sercuity.domain</code>, configures the
        <code class="classname">JBossAuthenticator</code> class where it can lookup the
        application server's security domain, which it will use to perform the
        authentication. Note that JBoss creates one security domain for each application
        policy element on the
        <code class="filename">$JBOSS_HOME/server/default/conf/login-config.xml</code> file, which
        gets bound to the server JNDI tree with name
        <code class="code">java:/jaas/&lt;application-policy-name&gt;</code>. If a lookup refers to a
        non existent application policy it defaults to a policy named other.
        </p></div></div><div class="chapter" title="Chapter 4. Database Setup"><div class="titlepage"><div><div><h2 class="title"><a id="chap-database_setup"/>Chapter 4. Database Setup</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-derby_OOB">4.1. Derby Out-of-the-Box</a></span></dt><dt><span class="section"><a href="#sect-switch_to_mysql">4.2. Switch to MySQL</a></span></dt><dt><span class="section"><a href="#sect-switch_to_postres">4.3. Switch to Postgres</a></span></dt><dt><span class="section"><a href="#sect-switch_to_oracle">4.4. Switch to Oracle</a></span></dt><dt><span class="section"><a href="#sect-switch_to_hsql">4.5. Switch to HSQL</a></span></dt><dt><span class="section"><a href="#sect-switch_to_other_DB">4.6. Switch to &lt;other db&gt;</a></span></dt><dt><span class="section"><a href="#sect-persistence_props">4.7. Override persistence properties in the juddiv3.properties</a></span></dt></dl></div><div class="section" title="4.1. Derby Out-of-the-Box"><div class="titlepage"><div><div><h2 class="title"><a id="sect-derby_OOB"/>4.1. Derby Out-of-the-Box</h2></div></div></div><p>
        By default jUDDI uses an embedded Derby database. This allows us to build a 
        downloadable distribution that works out-of-the-box, without having to do any 
        database setup work. We recommend switching to an enterprise-level database 
        before going to production. JUDDI uses the Java Persistence API (JPA) in the back 
        end and we've tested with both OpenJPA and Hibernate. To configure which JPA 
        provider you want to use, you will need to edit the configuration in the 
        <code class="filename">persistence.xml</code>. This file can be found in the 
        <code class="filename">juddi.war/WEB-INF/classes/META-INF/persistence.xml</code>
        </p><p>
        For Hibernate the content of this file looks like
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;persistence xmlns="http://java.sun.com/xml/ns/persistence" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" 
    version="1.0"&gt;
    &lt;persistence-unit name="juddiDatabase" transaction-type="RESOURCE_LOCAL"&gt;
        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;
        &lt;jta-data-source&gt;java:comp/env/jdbc/JuddiDS&lt;/jta-data-source&gt;
        &lt;!-- entity classes --&gt;
        &lt;class&gt;org.apache.juddi.model.Address&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.AddressLine&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.AuthToken&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.BindingCategoryBag&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.BindingDescr&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.BindingTemplate&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.BusinessCategoryBag&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.BusinessDescr&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.BusinessEntity&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.BusinessIdentifier&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.BusinessName&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.BusinessService&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.CanonicalizationMethod&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.CategoryBag&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.Clerk&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.ClientSubscriptionInfo&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.Contact&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.ContactDescr&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.DiscoveryUrl&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.Email&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.InstanceDetailsDescr&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.InstanceDetailsDocDescr&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.KeyDataValue&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.KeyedReference&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.KeyedReferenceGroup&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.KeyInfo&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.Node&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.ObjectType&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.ObjectTypeContent&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.OverviewDoc&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.OverviewDocDescr&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.PersonName&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.Phone&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.Publisher&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.PublisherAssertion&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.PublisherAssertionId&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.Reference&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.ServiceCategoryBag&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.ServiceDescr&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.ServiceName&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.ServiceProjection&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.Signature&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.SignatureMethod&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.SignatureTransform&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.SignatureTransformDataValue&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.SignatureValue&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.SignedInfo&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.Subscription&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.SubscriptionChunkToken&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.SubscriptionMatch&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.Tmodel&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.TmodelCategoryBag&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.TmodelDescr&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.TmodelIdentifier&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.TmodelInstanceInfo&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.TmodelInstanceInfoDescr&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.TransferToken&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.TransferTokenKey&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.UddiEntity&lt;/class&gt;
        &lt;class&gt;org.apache.juddi.model.UddiEntityPublisher&lt;/class&gt;

        &lt;properties&gt;
            &lt;property name="hibernate.archive.autodetection" value="class"/&gt;
            &lt;property name="hibernate.hbm2ddl.auto" value="update"/&gt;
            &lt;property name="hibernate.show_sql" value="false"/&gt;
            &lt;property name="hibernate.dialect" 
                value="org.hibernate.dialect.DerbyDialect"/&gt;
        &lt;/properties&gt;
    &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</pre><p>
        The <code class="filename">persistence.xml</code> reference a datasource
        <span class="property">“java:comp/env/jdbc/JuddiDS”</span>. Datasource deployment is
        Application Server specific. If you are using Tomcat, then the datasource is
        defined in <code class="filename">juddi/META-INF/context.xml</code> which by default looks
        like
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Context&gt;
    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;
    &lt;!--  --&gt;
    &lt;Resource name="jdbc/JuddiDS" auth="Container"
        type="javax.sql.DataSource" username="" password=""
        driverClassName="org.apache.derby.jdbc.EmbeddedDriver" 
        url="jdbc:derby:juddi-derby-test-db;create=true"
        maxActive="8" 
        /&gt;  
&lt;/Context&gt;</pre></div><div class="section" title="4.2. Switch to MySQL"><div class="titlepage"><div><div><h2 class="title"><a id="sect-switch_to_mysql"/>4.2. Switch to MySQL</h2></div></div></div><p>
        To switch over to MySQL you need to add the mysql driver (i.e. The
        <code class="filename">mysql-connector-java-5.1.6.jar</code>) to the classpath and you will
        need to edit the <code class="filename">persistence.xml</code>
        </p><pre class="programlisting">&lt;property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/&gt;</pre><p>
        and the datasource. For tomcat you the <code class="filename">context.xml</code> should
        look something like
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Context&gt;
    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;
    &lt;Resource name="jdbc/JuddiDS" auth="Container"
        type="javax.sql.DataSource" username="root" password=""
        driverClassName="com.mysql.jdbc.Driver" 
        url="jdbc:mysql://localhost:3306/juddiv3"
        maxActive="8"/&gt;  
&lt;/Context&gt;</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>
            Tomcat copies the <code class="filename">context.xml</code> to <code class="filename">conf/CATALINA/localhost/juddiv3.xml</code>, and if
            you update the <code class="filename">context.xml</code> it may not update this copy. You should simply
            delete the <code class="filename">juddiv3.xml</code> file after updating the <code class="filename">context.xml</code>.
            </p></div><p>
        To create a MySQL database name <code class="literal">juddiv3</code> use
        </p><pre class="screen">mysql&gt; create database juddiv3</pre><p>
        and finally you probably want to switch to a user which is a bit less potent then
        '<code class="literal">root</code>'.
        </p></div><div class="section" title="4.3. Switch to Postgres"><div class="titlepage"><div><div><h2 class="title"><a id="sect-switch_to_postres"/>4.3. Switch to Postgres</h2></div></div></div><p>
        This was written from a JBoss - jUDDI perspective. Non-JBoss-users may have to
        tweak this a little bit, but for the most part, the files and information needed
        is here.
        </p><p>
        Logged in as postgres user, access psql:
        </p><pre class="screen"># psql

postgres= CREATE USER juddi with PASSWORD 'password';
postgres= CREATE DATABASE juddi;
postgres= GRANT ALL PRIVILEGES ON DATABASE juddi to juddi;</pre><p>
        Note, for this example, my database is called juddi, as is the user who has full
        privileges to the database. The user 'juddi' has a password set to 'password'.
        </p><pre class="programlisting">&lt;datasources&gt;
    &lt;local-tx-datasource&gt;
        &lt;jndi-name&gt;JuddiDS&lt;/jndi-name&gt;
        &lt;connection-url&gt;jdbc:postgresql://localhost:5432/juddi&lt;/connection-url&gt;
        &lt;driver-class&gt;org.postgresql.Driver&lt;/driver-class&gt;
        &lt;user-name&gt;juddi&lt;/user-name&gt;
        &lt;password&gt;password&lt;/password&gt;
        &lt;!-- sql to call when connection is created.  Can be anything, 
        select 1 is valid for PostgreSQL 
        &lt;new-connection-sql&gt;select 1&lt;/new-connection-sql&gt;
        --&gt;
        &lt;!-- sql to call on an existing pooled connection when it is obtained 
        from pool.  Can be anything, select 1 is valid for PostgreSQL
        &lt;check-valid-connection-sql&gt;select 1&lt;/check-valid-connection-sql&gt;
        --&gt;
        &lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml --&gt;
        &lt;metadata&gt;
            &lt;type-mapping&gt;PostgreSQL 8.0&lt;/type-mapping&gt;
        &lt;/metadata&gt;
    &lt;/local-tx-datasource&gt;
&lt;/datasources&gt;</pre><p>
        In <code class="filename">persistence.xml</code>, reference the correct JNDI name of the
        datasource and remove the derby Dialect and add in the postgresql Dialect:
        </p><pre class="programlisting">&lt;jta-data-source&gt;java:comp/env/jdbc/JuddiDS&lt;/jta-data-source&gt;
    .....
&lt;property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/&gt;</pre><p>
        Be sure to have <code class="filename">postgresql-8.3-604.jdbc4.jar</code> in the
        <code class="filename">lib</code> folder!
        </p></div><div class="section" title="4.4. Switch to Oracle"><div class="titlepage"><div><div><h2 class="title"><a id="sect-switch_to_oracle"/>4.4. Switch to Oracle</h2></div></div></div><p>
        To switch over to Oracle you need to add the oracle driver (i.e. the<code class="filename">classes12.jar</code>) to the 
        classpath and you will need to edit the <code class="filename">persistence.xml</code>
        </p><pre class="programlisting">&lt;property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/&gt;</pre><p>
        To create a Oracle database name juddiv3 with the ultimate in minimalism use
        </p><pre class="programlisting">sqlplus&gt; create database juddiv3;</pre><p>
        then you probably want to switch to a user which is a bit less potent then 'root' and set the appropriate password.
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>
				Tomcat copies the context.xml to conf/CATALINA/localhost/juddiv3.xml, and if you update the context.xml it may not update this copy. 
				You should simply delete the juddiv3.xml file after updating the context.xml.
			</p></div><p>
		Please check the <a class="xref" href="#sect-changing_oracle_sequence_name" title="10.3. Changing the Oracle Sequence name">Section 10.3, “Changing the Oracle Sequence name”</a> if you want to change the Oracle Sequence name.
		</p></div><div class="section" title="4.5. Switch to HSQL"><div class="titlepage"><div><div><h2 class="title"><a id="sect-switch_to_hsql"/>4.5. Switch to HSQL</h2></div></div></div><p>First make sure you have a running hsqldb. For a standalone server startup use:</p><pre class="programlisting">
		java -cp hsqldb.jar org.hsqldb.server.Server --port 1747 --database.0 file:juddi --dbname.0 juddi
		</pre><p>Next, connect the client manager to this instance using:</p><pre class="programlisting">
		java -classpath hsqldb.jar org.hsqldb.util.DatabaseManagerSwing --driver org.hsqldb.jdbcDriver --url jdbc:hsqldb:hsql://localhost:1747/juddi  -user sa
		</pre><p>and create the juddi user:</p><pre class="programlisting">
		CREATE USER JUDDI PASSWORD "password"  ADMIN;
		CREATE SCHEMA JUDDI AUTHORIZATION JUDDI;
		SET DATABASE DEFAULT INITIAL SCHEMA JUDDI;
		ALTER USER juddi set initial schema juddi;
		</pre><p>From now on, one can connect as JUDDI user to that database and the database is now ready to go.</p><p>
        To switch over to HSQL you need to add the hsql driver (i.e. The
        <code class="filename">hsqldb.jar</code>) to the classpath and you will
        need to edit the <code class="filename">persistence.xml</code>
        </p><pre class="programlisting">&lt;property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/&gt;</pre><p>
        and the datasource. For tomcat you the <code class="filename">context.xml</code> should
        look something like
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Context&gt;
    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;
    &lt;!-- HSQL data source --&gt;
    &lt;Resource name="jdbc/JuddiDS" auth="Container"
            type="javax.sql.DataSource" username="JUDDI" password="password"
            driverClassName="org.hsqldb.jdbcDriver"
            url="jdbc:hsqldb:hsql://localhost:1747/juddi"
            maxActive="8"
            /&gt;
&lt;/Context&gt;</pre><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="warning"><h2>Warning</h2><p>
            Tomcat copies the <code class="filename">context.xml</code> to <code class="filename">conf/CATALINA/localhost/juddiv3.xml</code>, and if
            you update the <code class="filename">context.xml</code> it may not update this copy. You should simply
            delete the <code class="filename">juddiv3.xml</code> file after updating the <code class="filename">context.xml</code>.
            </p></div></div><div class="section" title="4.6. Switch to &lt;other db&gt;"><div class="titlepage"><div><div><h2 class="title"><a id="sect-switch_to_other_DB"/>4.6. Switch to &lt;other db&gt;</h2></div></div></div><p>
        If you use another database, please document, and send us what you had to change
        to make it work and we will include it here.
        </p></div><div class="section" title="4.7. Override persistence properties in the juddiv3.properties"><div class="titlepage"><div><div><h2 class="title"><a id="sect-persistence_props"/>4.7. Override persistence properties in the juddiv3.properties</h2></div></div></div><p>
        The juddiv3.properties file can be externalized; if you give the path of juddiv3.properties 
        in the JVM args, the juddiv3.properties will not be picked up from the WAR. To use this set the 
        <code class="filename">juddi.propertiesFile</code> to a location of your configuration file.
        This allows the user to change the juddi properties without having to open up the juddiv3.war file.
        For this usecase it makes sense that also persistence properties can be overriden as well
        in the juddiv3.properties file. The following properties can be set:
        </p><table title="persistence properties" id="d0e1015"><tr><th>property name</th><th>description</th><th>example value</th></tr><tr><td>persistenceProvider</td><td>JPA Implementation</td><td>Hibernate</td></tr><tr><td>hibernate.connection.datasource</td><td>datasource name</td><td>java:/jdbc/JuddiDS</td></tr><tr><td>hibernate.hbm2ddl.auto</td><td>hibernate to ddl setting </td><td>update</td></tr><tr><td>hibernate.default_schema</td><td>Schema name</td><td>JuddiSchema</td></tr><tr><td>hibernate.dialect</td><td>DataBase vendor name</td><td>org.hibernate.dialect.DB2Dialect</td></tr></table></div></div><div class="chapter" title="Chapter 5. Root Seed Data"><div class="titlepage"><div><div><h2 class="title"><a id="chap-root_seed_data"/>Chapter 5. Root Seed Data</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-root_seed_data_intro">5.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-seed_data_files">5.2. Seed Data Files</a></span></dt><dt><span class="section"><a href="#sect-tokens_in_the_seed_data">5.3. Token in the Seed Data</a></span></dt><dt><span class="section"><a href="#sect-custom_seed_data">5.4. Customer Seed Data</a></span></dt></dl></div><div class="section" title="5.1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="sect-root_seed_data_intro"/>5.1. Introduction</h2></div></div></div><p>
        As of UDDI v3, each registry need to have a <code class="literal">“root”</code> publisher.
        The root publisher is the owner of the UDDI services (inquiry, publication, etc).
        There can only be one root publisher per node. JUDDI ships some default seed data
        for the root account. The default data can be found in the
        <code class="filename">juddi-core-3.x.jar</code>, under
        <code class="filename">juddi_install_data/</code>. By default jUDDI installs two
        Publishers: <code class="literal">“root”</code> and <code class="literal">“uddi”</code>. Root owns the
        root partition, and uddi owns all the other seed data such as pre-defined tModels.
        </p></div><div class="section" title="5.2. Seed Data Files"><div class="titlepage"><div><div><h2 class="title"><a id="sect-seed_data_files"/>5.2. Seed Data Files</h2></div></div></div><p>
        For each publisher there are four seed data files that will be read the first time
        you start jUDDI:
        </p><pre class="screen">&lt;publisher&gt;_Publisher.xml
&lt;publisher&gt;_tModelKeyGen.xml
&lt;publisher&gt;_BusinessEntity.xml
&lt;publisher&gt;_tModels.xml</pre><p>
        For example the content of the <code class="filename">root_Publisher.xml</code> looks like
        </p><pre class="programlisting">&lt;publisher xmlns="urn:juddi-apache-org:api_v3" authorizedName="root"&gt;
    &lt;publisherName&gt;root publisher&lt;/publisherName&gt;
    &lt;isAdmin&gt;true&lt;/isAdmin&gt;
&lt;/publisher&gt;</pre><p>
        Each publisher should have its own key generator schema so that custom generated
        keys cannot end up being identical to keys generated by other publishers. It is
        therefor that the each publisher need to define their own KenGenerator tModel. The
        tModel Key Generator is defined in the file <code class="filename">root_tModelKeyGen.xml</code> 
        and the content of this file is
        </p><pre class="programlisting">&lt;tModel tModelKey="uddi:juddi.apache.org:keygenerator" xmlns="urn:uddi-org:api_v3"&gt;
    &lt;name&gt;uddi-org:keyGenerator&lt;/name&gt;
    &lt;description&gt;Root domain key generator&lt;/description&gt;
    &lt;overviewDoc&gt;
        &lt;overviewURL useType="text"&gt;
        http://uddi.org/pubs/uddi_v3.htm#keyGen
        &lt;/overviewURL&gt;
    &lt;/overviewDoc&gt;
    &lt;categoryBag&gt;
        &lt;keyedReference tModelKey="uddi:uddi.org:categorization:types" 
            keyName="uddi-org:types:keyGenerator"
            keyValue="keyGenerator" /&gt;
    &lt;/categoryBag&gt;
&lt;/tModel&gt;</pre><p>
        This means that the legal format of keys used by the root publisher need to be in
        the form <code class="literal">uddi:juddi.apache.org:&lt;text-of-chioce&gt;</code> The use 
        of other types of format will lead to an 'illegal key' error. The root publisher
        can only own one KeyGenerator while any other publisher can own more then one
        KeyGenerator. KeyGenerators should not be shared unless there is a good reason to
        do so. If you want to see your publisher with more then just the one KeyGenerator
        tModel, you can use the<code class="filename"> &lt;publisher&gt;_tModels.xml</code> file.
        </p><p>
        Finally, in the <code class="filename">&lt;publisher&gt;_BusinessEntity.xml</code> file can
        be used to setup Business and Service data. In the <code class="filename">root_BusinessEntity.xml</code> we
        specified the ASF Business, and the UDDI services; Inquiry, Publish, etc.:
        </p><pre class="programlisting">&lt;businessEntity xmlns="urn:uddi-org:api_v3" 
    xmlns:xml="http://www.w3.org/XML/1998/namespace" 
    businessKey="uddi:juddi.apache.org:businesses-asf"&gt;
    &lt;!-- Change the name field to represent the name of your registry --&gt;
    &lt;name xml:lang="en"&gt;An Apache jUDDI Node&lt;/name&gt;
        &lt;!-- Change the description field to provided 
        a brief description of your registry --&gt;
        &lt;description xml:lang="en"&gt;
            This is a UDDI v3 registry node as implemented by Apache jUDDI.
        &lt;/description&gt;
        &lt;discoveryURLs&gt;
        &lt;!-- This discovery URL should point to the home installation URL of jUDDI --&gt;
        &lt;discoveryURL useType="home"&gt;
            http://${juddi.server.name}:${juddi.server.port}/juddiv3
        &lt;/discoveryURL&gt;
    &lt;/discoveryURLs&gt;
    &lt;categoryBag&gt;
        &lt;keyedReference tModelKey="uddi:uddi.org:categorization:nodes" keyValue="node" /&gt;
    &lt;/categoryBag&gt;

    &lt;businessServices&gt;
    &lt;!-- As mentioned above, you may want to provide user-defined keys for 
    these (and the services/bindingTemplates below.  Services that you
    don't intend to support should be removed entirely --&gt;
        &lt;businessService serviceKey="uddi:juddi.apache.org:services-inquiry" 
            businessKey="uddi:juddi.apache.org:businesses-asf"&gt;
            &lt;name xml:lang="en"&gt;UDDI Inquiry Service&lt;/name&gt;
            &lt;description xml:lang="en"&gt;Web Service supporting UDDI Inquiry API&lt;/description&gt;
            &lt;bindingTemplates&gt;
                &lt;bindingTemplate bindingKey="uddi:juddi.apache.org:servicebindings-inquiry-ws" 
                    serviceKey="uddi:juddi.apache.org:services-inquiry"&gt;
                    &lt;description&gt;UDDI Inquiry API V3&lt;/description&gt;
                    &lt;!-- This should be changed to the WSDL URL of the inquiry API.  
                    An access point inside a bindingTemplate will be found for every service
                    in this file.  They all must point to their API's WSDL URL --&gt;
                    &lt;accessPoint useType="wsdlDeployment"&gt;
                        http://${juddi.server.name}:${juddi.server.port}/juddiv3/services/inquiry?wsdl
                    &lt;/accessPoint&gt;
                    &lt;tModelInstanceDetails&gt;
                        &lt;tModelInstanceInfo tModelKey="uddi:uddi.org:v3_inquiry"&gt;
                            &lt;instanceDetails&gt;
                                &lt;instanceParms&gt;
                                &lt;![CDATA[
                                &lt;?xml version="1.0" encoding="utf-8" ?&gt;
                                &lt;UDDIinstanceParmsContainer 
                                    xmlns="urn:uddi-org:policy_v3_instanceParms"&gt;
                                    &lt;defaultSortOrder&gt;
                                        uddi:uddi.org:sortorder:binarysort
                                    &lt;/defaultSortOrder&gt;
                                &lt;/UDDIinstanceParmsContainer&gt;
                                ]]&gt;
                                &lt;/instanceParms&gt;
                            &lt;/instanceDetails&gt;
                        &lt;/tModelInstanceInfo&gt;
                    &lt;/tModelInstanceDetails&gt;
                    &lt;categoryBag&gt;
                        &lt;keyedReference keyName="uddi-org:types:wsdl" keyValue="wsdlDeployment" 
                            tModelKey="uddi:uddi.org:categorization:types"/&gt;
                    &lt;/categoryBag&gt;
                &lt;/bindingTemplate&gt;
            &lt;/bindingTemplates&gt;
        &lt;/businessService&gt;
        &lt;businessService serviceKey="uddi:juddi.apache.org:services-publish" 
            businessKey="uddi:juddi.apache.org:businesses-asf"&gt;
            &lt;name xml:lang="en"&gt;UDDI Publish Service&lt;/name&gt;
            ...........
        &lt;/businessService&gt;
    &lt;/businessServices&gt;
&lt;/businessEntity&gt;</pre><p>
        Note that the seeding process only kicks off if no publishers exist in the
        database. So this will only work with a clean database, unless you set
        <code class="literal">juddi.seed.always</code> to true. Then it will re-apply all files with
        the exception of the root data files. Note that this can lead to losing data that
        was added to entities that are re-seeded, since data is not merged.
        </p></div><div class="section" title="5.3. Token in the Seed Data"><div class="titlepage"><div><div><h2 class="title"><a id="sect-tokens_in_the_seed_data"/>5.3. Token in the Seed Data</h2></div></div></div><p>
        You may have noticed the tokens in the <code class="filename">root_BusinessEntity.xml</code> 
        file (<code class="literal">${juddi.server.baseurl}</code>. The value of this tokens can set in
        the <code class="filename">juddiv3.properties</code> file. The value substitution takes place
        at runtime, so that different nodes can do the substitution  with their own value if needed.
        </p></div><div class="section" title="5.4. Customer Seed Data"><div class="titlepage"><div><div><h2 class="title"><a id="sect-custom_seed_data"/>5.4. Customer Seed Data</h2></div></div></div><p>
        In your deployment you probably do not want to use the Seed Data shipped with the
        default jUDDI install. The easiest way to overwrite this data is to add it to a
        directory call <code class="filename">juddi_custom_install_data</code> in the
        <code class="filename">juddiv3.war/WEB-INF/classes/</code> directory. That way you don't
        have to modify the <code class="filename">juddi-core-3.x.jar</code>. Additionally if your
        root publisher is not called “root” you will need to set the
        <span class="property">juddi.root.publisher</span> property in the
        <code class="filename">juddiv3.properties</code> file to something other then
        </p><pre class="programlisting">juddi.root.publisher=root</pre><p>
        The <code class="filename">juddiv3.war</code> ships with two example data directory. One
        for the Sales Affiliate, and one for the Marketing Affiliate. To use the Sales
        Seed Data, in the <code class="filename">juddiv3.war/WEB-INF/classes/</code>, rename the
        directory
        </p><pre class="screen">mv RENAME4Sales_juddi_custom_install_data juddi_custom_install_data</pre><p>
        before you start jUDDI the first time. It will then use this data to populate the
        database. If you want to rerun you can trash the database it created and restart
        tomcat. Don't forget to set the tokens in the <code class="filename">juddiv3.properties</code> file.
        </p></div></div><div class="chapter" title="Chapter 6. jUDDI_Configuration"><div class="titlepage"><div><div><h2 class="title"><a id="chap-jUDDI_Configuration"/>Chapter 6. jUDDI_Configuration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-config_Introduction">6.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-config_authentication">6.2. Authentication</a></span></dt><dt><span class="section"><a href="#sect-startup">6.3. Startup</a></span></dt><dt><span class="section"><a href="#sect-config_queries">6.4. Queries</a></span></dt><dt><span class="section"><a href="#sect-config_proxy">6.5. Proxy Settings</a></span></dt><dt><span class="section"><a href="#sect-config_keygeneration">6.6. KeyGeneration</a></span></dt><dt><span class="section"><a href="#sect-config_subscription">6.7. Subscription</a></span></dt><dt><span class="section"><a href="#sect-config_transfer">6.8. Transfer</a></span></dt></dl></div><div class="section" title="6.1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="sect-config_Introduction"/>6.1. Introduction</h2></div></div></div><p>
        jUDDI will look for a juddiv3.properties file on the root of the classpath. In the
        <code class="filename">juddiv3.war</code> you can find it in
        <code class="filename">juddiv3.war/WEB_INF/classes/juddiv3.properties</code>
        </p></div><div class="section" title="6.2. Authentication"><div class="titlepage"><div><div><h2 class="title"><a id="sect-config_authentication"/>6.2. Authentication</h2></div></div></div><pre class="programlisting"># Specifies whether the inquiry API requires authentication
juddi.authenticate.Inquiry=false
</pre><p>
		This flag determines whether authentication (the presence of a getAuthToken) is required on queries invoking the Inquiry API.      By default, jUDDI sets this to
		false for ease of use.
        </p><pre class="programlisting"># jUDDI Authentication module to use
juddi.authenticator = org.apache.juddi.v3.auth.JUDDIAuthenticator
</pre><p>
		The jUDDI authenticator class to use.    See Chapter 3 of the Userguide for the choices provided.
        </p></div><div class="section" title="6.3. Startup"><div class="titlepage"><div><div><h2 class="title"><a id="sect-startup"/>6.3. Startup</h2></div></div></div><pre class="programlisting"># The ${juddi.server.baseurl} token can be referenced in accessPoints and will be resolved at runtime.
juddi.server.baseurl=http://localhost:8080
</pre><p>
        Token that can be accessed in accessPointURLs and resolved at runtime.
		</p><pre class="programlisting"># 
juddi.root.publisher=root
</pre><p>
        The username for the jUDDI root publisher.     This is usually just set to "root".
		</p><pre class="programlisting">#
juddi.seed.always=false
</pre><p>
		Forces seeding of the jUDDI data. This will re-apply all files with
        the exception of the root data files. Note that this can lead to losing data that
        was added to the entities that are re-seeded, since data is not merged.
		</p><pre class="programlisting">#
juddi.load.install.data=false
</pre><p>
		This property allows you to cancel loading of the jUDDI install data.
		</p><pre class="programlisting"># Default locale
juddi.locale=en_US
</pre><p>
		The default local to use.
		</p><pre class="programlisting"># Name of the persistence unit to use (the default, "juddiDatabase" refers to the unit compiled into the juddi library)
juddi.persistenceunit.name=juddiDatabase
</pre><p>
		The persistence name for the jUDDI database that is specified in the <code class="filename">persistence.xml</code> file.
		</p><pre class="programlisting"># Check-the-time-stamp-on-this-file Interval in milli seconds
juddi.configuration.reload.delay=2000
</pre><p>
		The time in milliseconds in which juddiv3.properties is polled for changes.
		</p><pre class="programlisting"># These two tokens are referenced in the install data. Note that you
# can use any tokens, and that their values can be set here or as
# System parameters.
juddi.server.name=macdaddy
juddi.server.port=8080
</pre><p>
		The server name and port number of the server.
		</p><pre class="programlisting">#The UDDI Operator Contact Email Address
juddi.operatorEmailAddress=admin@juddi.org

</pre><p>
		The jUDDI operator email address.
		</p></div><div class="section" title="6.4. Queries"><div class="titlepage"><div><div><h2 class="title"><a id="sect-config_queries"/>6.4. Queries</h2></div></div></div><pre class="programlisting"># The maximum number of UDDI artifacts allowed
# per publisher. A value of '-1' indicates any
# number of artifacts is valid (These values can be
# overridden at the individual publisher level).
juddi.maxBindingsPerService=10

</pre><p>
		The maximum number of bindings that can be specified per service.
        </p><pre class="programlisting"># The maximum number of UDDI artifacts allowed
# per publisher. A value of '-1' indicates any
# number of artifacts is valid (These values can be
# overridden at the individual publisher level).
juddi.maxBusinessesPerPublisher=25
</pre><p>
		The maximum number of businesses that can be registered per publisher.
        </p><pre class="programlisting"># The maximum number of "IN" clause parameters.  Some RDMBS limit the number of
# parameters allowed in a SQL "IN" clause.
juddi.maxInClause=1000
</pre><p>
		The maximum number of parameters within an IN clause.
        </p><pre class="programlisting"># The maximum name size and maximum number
# of name elements allows in several of the
# FindXxxx and SaveXxxx UDDI functions.
juddi.maxNameElementsAllowed=5
</pre><p>
		Maximum number of name elements allowed in a jUDDI query.
        </p><pre class="programlisting"># The maximum name size and maximum number
# of name elements allows in several of the
# FindXxxx and SaveXxxx UDDI functions.
juddi.maxNameLength=255
</pre><p>
		Maximum name size within a jUDDI query. 
        </p><pre class="programlisting"># The maximum number of rows returned in a find_* operation.  Each call can set
# this independently, but this property defines a global maximum.
juddi.maxRows=1000
</pre><p>
		Maximum number of rows within a response.
        </p><pre class="programlisting"># The maximum number of UDDI artifacts allowed
# per publisher. A value of '-1' indicates any
# number of artifacts is valid (These values can be
# overridden at the individual publisher level).
juddi.maxServicesPerBusiness=20
</pre><p>
		Maxmimum number of services in a business.
        </p><pre class="programlisting"># The maximum number of UDDI artifacts allowed
# per publisher. A value of '-1' indicates any
# number of artifacts is valid (These values can be
# overridden at the individual publisher level).
juddi.maxTModelsPerPublisher=100

</pre><p>
		Maximum number of TModels a publisher can create.
        </p></div><div class="section" title="6.5. Proxy Settings"><div class="titlepage"><div><div><h2 class="title"><a id="sect-config_proxy"/>6.5. Proxy Settings</h2></div></div></div><pre class="programlisting">#only used by RMITransport
#juddi.proxy.factory.initial     =org.jnp.interfaces.NamingContextFactory
#juddi.proxy.provider.url        =jnp://localhost:1099
#juddi.proxy.factory.url.pkg     =org.jboss.naming
</pre><p>
        This is the upper boundary set by the registry. Between the user defined endDate
        of a Subscription and this value, the registry will pick the earliest date.
        </p></div><div class="section" title="6.6. KeyGeneration"><div class="titlepage"><div><div><h2 class="title"><a id="sect-config_keygeneration"/>6.6. KeyGeneration</h2></div></div></div><pre class="programlisting"># jUDDI Cryptor implementation to use
juddi.cryptor = org.apache.juddi.cryptor.DefaultCryptor
</pre><p>
		Cryptor implementation that jUDDI will use.
        </p><pre class="programlisting"># jUDDI Key Generator to use
juddi.keygenerator=org.apache.juddi.keygen.KeyGenerator
</pre><p>
		Key generator implementation that jUDDI will use.
        </p><pre class="programlisting"># jUDDI UUIDGen implementation to use
juddi.uuidgen = org.apache.juddi.uuidgen.DefaultUUIDGen
</pre><p>
		UUID generation implementation that jUDDI will use.
        </p></div><div class="section" title="6.7. Subscription"><div class="titlepage"><div><div><h2 class="title"><a id="sect-config_subscription"/>6.7. Subscription</h2></div></div></div><pre class="programlisting"># Minutes before a "chunked" subscription call expires
juddi.subscription.chunkexpiration.minutes=5</pre><p>
        This is the expiration time of a subscription “chunk”.
        </p><pre class="programlisting">#
# Days before a subscription expires
juddi.subscription.expiration.days=30
</pre><p>
		This is the upper boundary set by the registry. Between the user defined endDate
        of a Subscription and this value, the registry will pick the earliest date.
        </p><pre class="programlisting"># Specifies the interval at which the notification timer triggers
juddi.notification.interval=3000000
</pre><p>
		Specifies the interval at which the notification timer triggers.
		</p><pre class="programlisting"># Specifies the amount of time to wait before the notification timer initially fires
juddi.notification.start.buffer=20000
</pre><p>
		Specifies the amount of time to wait before the notification timer initially fires.
        </p></div><div class="section" title="6.8. Transfer"><div class="titlepage"><div><div><h2 class="title"><a id="sect-config_transfer"/>6.8. Transfer</h2></div></div></div><pre class="programlisting"># Days before a transfer request expires
juddi.transfer.expiration.days=3
</pre><p>
        Days before a transfer request expires.
		</p></div></div><div class="chapter" title="Chapter 7. Using the jUDDI-Client"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Using_jUDDI-Client"/>Chapter 7. Using the jUDDI-Client</h2></div></div></div><div class="toc"><dl><dt><span class="sect1"><a href="#sect-jUDDI_Client_intro">7.1. Introduction</a></span></dt><dt><span class="sect1"><a href="#sect-configuration">7.2. Configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#sect-JAX-SW_transport">7.2.1. JAX-WS Transport</a></span></dt><dt><span class="sect2"><a href="#sect-RMI_transport">7.2.2. RMI Transport</a></span></dt><dt><span class="sect2"><a href="#sect-InVM_transport">7.2.3. InVM Transport</a></span></dt></dl></dd><dt><span class="sect1"><a href="#chap-UDDI_annotations">7.3. UDDI Annotations</a></span></dt><dd><dl><dt><span class="sect2"><a href="#sect-intro_annotations">7.3.1. Introduction</a></span></dt><dt><span class="sect2"><a href="#sect-UDDIService">7.3.2. UDDIService Annotation</a></span></dt><dt><span class="sect2"><a href="#sect-UDDIServiceBinding">7.3.3. UDDIServiceBinding Annotation</a></span></dt><dt><span class="sect2"><a href="#sect-WebServiceExample">7.3.4. WebService Example</a></span></dt><dt><span class="sect2"><a href="#d0e1804">7.3.5. Templating keys</a></span></dt></dl></dd><dt><span class="sect1"><a href="#sect-programmatic">7.4. Programmatic use</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d0e1817">7.4.1. WSDL Registration</a></span></dt><dt><span class="sect2"><a href="#d0e1839">7.4.2. BPEL Process Registration</a></span></dt><dt><span class="sect2"><a href="#d0e1853">7.4.3. Conventions around UDDIv3 registration</a></span></dt></dl></dd><dt><span class="sect1"><a href="#sect-service-lookup">7.5. Dynamic UDDI Service Lookup</a></span></dt><dt><span class="sect1"><a href="#sect-dependencies">7.6. Dependencies</a></span></dt><dt><span class="sect1"><a href="#sect-sample_code">7.7. Sample Code</a></span></dt><dt><span class="sect1"><a href="#sect-references">7.8. References</a></span></dt></dl></div><div class="sect1" title="7.1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="sect-jUDDI_Client_intro"/>7.1. Introduction</h2></div></div></div><p>
        The jUDDI project includes UDDI Client code (<code class="filename">juddi-client-3.x.jar</code>), 
        which is Java client library to connect to a UDDI Registry, and to manipulate it.
        The client uses the UDDI v3 API and can be configured to connect to any
        UDDI v3 compliant registry (it has been tested against jUDDI v3 itself as well as
        against HP Systenet). This library can be embedded in your own application and used
        programmatically or by using annotations.
        </p></div>
   
    programmatically
    
    WSDL
    BPEL
    annotations
    cleint side key generation
    
    
    
    <div class="sect1" title="7.2. Configuration"><div class="titlepage"><div><div><h2 class="title"><a id="sect-configuration"/>7.2. Configuration</h2></div></div></div><p>
        For the client to connect to the UDDI server we need to provide it with the correct connection settings,
        which we call 'Transport' settings. In addition to these transport settings there are other client features
        that can be configured using the client configuration file <code class="filename">META-INF/uddi.xml</code>. 
        You can deploy one of these client configuration files in your deployment archive that is
        interacting with the UDDI client code. To make sure the configuration is read you need to either call 
        </p><pre class="programlisting">
UDDIClerkManager clerkManager = new UDDIClerkManager("META/myuddi.xml");
clerkManager.start();
		</pre><p>
        or you if your application deploys are a war archive, you can add your client config in
        <code class="filename">yourwar/META-INF/myuddi.xml</code>, add in the web.xml specify
        the context parameters <code class="filename">uddi.client.manager.name</code> and <code class="filename">uddi.client.xml</code>.
        In the following example both context parameters are set and on deployment the UDDIClerkServlet
        takes care of reading the configuration.
        </p><pre class="programlisting">&lt;!-- required --&gt;
&lt;context-param&gt;
    &lt;param-name&gt;uddi.client.manager.name&lt;/param-name&gt;
    &lt;param-value&gt;example-manager&lt;/param-value&gt;
 &lt;/context-param&gt;
 
&lt;!-- optional override --&gt;
&lt;context-param&gt;
    &lt;param-name&gt;uddi.client.xml&lt;/param-name&gt;
    &lt;param-value&gt;META-INF/myuddi.xml&lt;/param-value&gt;
&lt;/context-param&gt;

&lt;servlet&gt;
    &lt;servlet-name&gt;UDDIClerkServlet&lt;/servlet-name&gt;
    &lt;display-name&gt;Clerk Servlet&lt;/display-name&gt;
    &lt;servlet-class&gt;org.apache.juddi.v3.client.config.UDDIClerkServlet&lt;/servlet-class&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;</pre><p>
        The following is an example of a simple client configuration file:
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1" ?&gt;
&lt;uddi&gt;
  &lt;reloadDelay&gt;5000&lt;/reloadDelay&gt;
  &lt;manager name="example-manager"&gt;
    &lt;nodes&gt;
      &lt;node isHomeJUDDI="true"&gt;
        &lt;name&gt;default&lt;/name&gt;
        &lt;description&gt;jUDDI node&lt;/description&gt;  
        &lt;properties&gt;
          &lt;property name="serverName"  value="www.myuddiserver.com"/&gt;
          &lt;property name="serverPort"  value="8080"/&gt;
          &lt;property name="keyDomain"   value="mydepartment.mydomain.org"/&gt;
          &lt;property name="department"  value="mydepartment" /&gt;
        &lt;/properties&gt;
        &lt;!-- InVM --&gt;
        &lt;proxyTransport&gt;org.apache.juddi.v3.client.transport.InVMTransport&lt;/proxyTransport&gt;
        &lt;custodyTransferUrl&gt;org.apache.juddi.api.impl.UDDICustodyTransferImpl&lt;/custodyTransferUrl&gt;
        &lt;inquiryUrl&gt;org.apache.juddi.api.impl.UDDIInquiryImpl&lt;/inquiryUrl&gt;
        &lt;publishUrl&gt;org.apache.juddi.api.impl.UDDIPublicationImpl&lt;/publishUrl&gt;
        &lt;securityUrl&gt;org.apache.juddi.api.impl.UDDISecurityImpl&lt;/securityUrl&gt;
        &lt;subscriptionUrl&gt;org.apache.juddi.api.impl.UDDISubscriptionImpl&lt;/subscriptionUrl&gt;
        &lt;subscriptionListenerUrl&gt;org.apache.juddi.api.impl.UDDISubscriptionListenerImpl&lt;/subscriptionListenerUrl&gt;
        &lt;juddiApiUrl&gt;org.apache.juddi.api.impl.JUDDIApiImpl&lt;/juddiApiUrl&gt;
        &lt;!-- JAX-WS Transport 
        &lt;proxyTransport&gt;org.apache.juddi.v3.client.transport.JAXWSTransport&lt;/proxyTransport&gt;
        &lt;custodyTransferUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/custody-transfer&lt;/custodyTransferUrl&gt;
        &lt;inquiryUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/inquiry&lt;/inquiryUrl&gt;
        &lt;publishUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/publish&lt;/publishUrl&gt;
        &lt;securityUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/security&lt;/securityUrl&gt;
        &lt;subscriptionUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/subscription&lt;/subscriptionUrl&gt;
        &lt;subscriptionListenerUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/subscription-listener&lt;/subscriptionListenerUrl&gt;
        &lt;juddiApiUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/juddi-api?wsdl&lt;/juddiApiUrl&gt;
        --&gt;
        &lt;!-- RMI Transport Settings
        &lt;proxyTransport&gt;org.apache.juddi.v3.client.transport.RMITransport&lt;/proxyTransport&gt;
        &lt;custodyTransferUrl&gt;/juddiv3/UDDICustodyTransferService&lt;/custodyTransferUrl&gt;
        &lt;inquiryUrl&gt;/juddiv3/UDDIInquiryService&lt;/inquiryUrl&gt;
        &lt;publishUrl&gt;/juddiv3/UDDIPublicationService&lt;/publishUrl&gt;
        &lt;securityUrl&gt;/juddiv3/UDDISecurityService&lt;/securityUrl&gt;
        &lt;subscriptionUrl&gt;/juddiv3/UDDISubscriptionService&lt;/subscriptionUrl&gt;
        &lt;subscriptionListenerUrl&gt;/juddiv3/UDDISubscriptionListenerService&lt;/subscriptionListenerUrl&gt;
        &lt;juddiApiUrl&gt;/juddiv3/JUDDIApiService&lt;/juddiApiUrl&gt;
        &lt;javaNamingFactoryInitial&gt;org.jnp.interfaces.NamingContextFactory&lt;/javaNamingFactoryInitial&gt;
        &lt;javaNamingFactoryUrlPkgs&gt;org.jboss.naming&lt;/javaNamingFactoryUrlPkgs&gt;
        &lt;javaNamingProviderUrl&gt;jnp://${serverName}:1099&lt;/javaNamingProviderUrl&gt;
        --&gt;
      &lt;/node&gt;
    &lt;/nodes&gt;
    &lt;clerks registerOnStartup="true"&gt;
      &lt;clerk name="BobCratchit" node="default" publisher="bob" password="bob"&gt;
         &lt;class&gt;org.apache.juddi.samples.HelloWorldImpl&lt;/class&gt;
      &lt;/clerk&gt;
    &lt;/clerks&gt;
  &lt;/manager&gt;	
&lt;/uddi&gt;</pre><p>
        The manager element is required element, and the name attribute 'example-manager' should be unique in your deployment
        environment. The nodes element may contain one or more node elements. Typically you would only
        need one node, unless you are using subscriptions to transfer updates of entities from one UDDI registry to 
        another. For the 'local' registry you would set isHomeJUDDI="true", while for the 'remote' registries you would
        set isHomeJUDDI="false". 
        </p><table title="node element" id="d0e1384"><tr><th>element name</th><th>description</th><th>required</th></tr><tr><td>name</td><td>name of the node</td><td>yes</td></tr><tr><td>description</td><td>description of the node</td><td>no</td></tr><tr><td>properties</td><td>container for properties that will be passed into the clerk</td><td>no</td></tr><tr><td>proxyTransport</td><td>The transport protocol used by the client to connect to the UDDI server</td><td>yes</td></tr><tr><td>custodyTransferUrl</td><td>Connection settings for custody transfer</td><td>no</td></tr><tr><td>inquiryUrl</td><td>Connection location settings for inquiries</td><td>yes</td></tr><tr><td>publishUrl</td><td>Connection location settings for publishing</td><td>yes</td></tr><tr><td>securityUrl</td><td>Connection location settings for obtaining security tokens</td><td>yes</td></tr><tr><td>subscriptionUrl</td><td>Connection location settings for registering subscription requests</td><td>no</td></tr><tr><td>subscriptionListenerUrl</td><td>Connection location settings receiving subscription notifications</td><td>no</td></tr><tr><td>juddiApiUrl</td><td>Connection location settings for the jUDDI specific API for things like publisher management</td><td>no</td></tr></table><p>
        Finally the manager element can contain a 'clerks' element in which one can define one or more clerks.
        </p><table title="clerk" id="d0e1470"><tr><th>attribute name</th><th>description</th><th>required</th></tr><tr><td>name</td><td>name of the clerk</td><td>yes</td></tr><tr><td>node</td><td>name reference to one of the nodes specified in the same manager</td><td>yes</td></tr><tr><td>publisher</td><td>name of an existing publisher</td><td>yes</td></tr><tr><td>password</td><td>password credential of the publisher</td><td>yes</td></tr></table><p>
        </p><div class="sect2" title="7.2.1. JAX-WS Transport"><div class="titlepage"><div><div><h3 class="title"><a id="sect-JAX-SW_transport"/>7.2.1. JAX-WS Transport</h3></div></div></div><p>
        Using the settings in the <code class="filename">uddi.xml</code> file from above,
        the client will use JAX-WS to communicate with the (remote) registry server. This
        means that the client needs to have access to a JAX-WS compliant WS stack (such as
        CXF, Axis2 or JBossWS). Note that the juddiApiUrl is a reference to the WSDL endpoint while
        the others should reference the actual endpoints.
        </p><pre class="programlisting">&lt;!-- JAX-WS Transport --&gt;
&lt;proxyTransport&gt;org.apache.juddi.v3.client.transport.JAXWSTransport&lt;/proxyTransport&gt;
&lt;custodyTransferUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/custody-transfer&lt;/custodyTransferUrl&gt;
&lt;inquiryUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/inquiry&lt;/inquiryUrl&gt;
&lt;publishUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/publish&lt;/publishUrl&gt;
&lt;securityUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/security&lt;/securityUrl&gt;
&lt;subscriptionUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/subscription&lt;/subscriptionUrl&gt;
&lt;subscriptionListenerUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/subscription-listener&lt;/subscriptionListenerUrl&gt;
&lt;juddiApiUrl&gt;http://${serverName}:${serverPort}/juddiv3/services/juddi-api?wsdl&lt;/juddiApiUrl&gt;</pre><p>pros: Standard way of UDDI communication, should work with all UDDIv3 server implementations.</p><p>cons: If the server is deployed on the same application server this may lead to issues when
    	auto-registration on deployment/undeployment is used, since the WS stack may become unavailable during
    	undeployment. A workaround is to host the UDDI server on a different server.</p></div><div class="sect2" title="7.2.2. RMI Transport"><div class="titlepage"><div><div><h3 class="title"><a id="sect-RMI_transport"/>7.2.2. RMI Transport</h3></div></div></div><p>
	        If jUDDI server is deployed to an Application Server it is possible to register the
	        UDDI Services as RMI services. If this is desired you need to edit the
	        <code class="filename">juddiv3.war/WEB-INF/classes/juddiv3.properties</code> 
	        file, on the server. Add the following setting
	        </p><pre class="programlisting">juddi.jndi.registration=true</pre><p>
	        At deployment time the RMI based UDDI services are bound into the Global JNDI
	        namespace.
	        </p><div class="variablelist"><dl><dt><span class="term">juddi (class: <code class="classname">org.jnp.interfaces.NamingContext</code>)</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
	                            UDDIPublicationService (class: <code class="classname">org.apache.juddi.rmi.UDDIPublicationService</code>)
	                            </p></li><li class="listitem"><p>
	                            UDDICustodyTransferService (class: <code class="classname">org.apache.juddi.rmi.UDDICustodyTransferService</code>)
	                            </p></li><li class="listitem"><p>
	                            UDDISubscriptionListenerService (class: <code class="classname">org.apache.juddi.rmi.UDDISubscriptionListenerService</code>)
	                            </p></li><li class="listitem"><p>
	                            UDDISecurityService (class: <code class="classname">org.apache.juddi.rmi.UDDISecurityService</code>)
	                            </p></li><li class="listitem"><p>
	                            UDDISubscriptionService (class: <code class="classname">org.apache.juddi.rmi.UDDISubscriptionService</code>)
	                            </p></li><li class="listitem"><p>
	                            UDDIInquiryService (class: <code class="classname">org.apache.juddi.rmi.UDDIInquiryService</code>)
	                            </p></li></ul></div></dd></dl></div><p>
	        Next, on the client side you need to comment out the JAXWS section in the
	        <code class="filename">uddi.xml</code> file and use the RMI Transport section
	        instead. Optionally you can set the <code class="literal">java.naming.*</code> properties.
	        In this case we specified setting for connecting to jUDDIv3 deployed to a JBoss
	        Application Server. You can set the <code class="literal">java.naming.*</code>
	        properties in a <code class="filename">jndi.xml</code> file, or as System
	        parameters.
	        </p><pre class="programlisting">&lt;!-- RMI Transport Settings --&gt;
&lt;proxyTransport&gt;org.apache.juddi.v3.client.transport.RMITransport&lt;/proxyTransport&gt;
&lt;custodyTransferUrl&gt;/juddiv3/UDDICustodyTransferService&lt;/custodyTransferUrl&gt;
&lt;inquiryUrl&gt;/juddiv3/UDDIInquiryService&lt;/inquiryUrl&gt;
&lt;publishUrl&gt;/juddiv3/UDDIPublicationService&lt;/publishUrl&gt;
&lt;securityUrl&gt;/juddiv3/UDDISecurityService&lt;/securityUrl&gt;
&lt;subscriptionUrl&gt;/juddiv3/UDDISubscriptionService&lt;/subscriptionUrl&gt;
&lt;subscriptionListenerUrl&gt;/juddiv3/UDDISubscriptionListenerService&lt;/subscriptionListenerUrl&gt;
&lt;juddiApiUrl&gt;/juddiv3/JUDDIApiService&lt;/juddiApiUrl&gt;
&lt;javaNamingFactoryInitial&gt;org.jnp.interfaces.NamingContextFactory&lt;/javaNamingFactoryInitial&gt;
&lt;javaNamingFactoryUrlPkgs&gt;org.jboss.naming&lt;/javaNamingFactoryUrlPkgs&gt;
&lt;javaNamingProviderUrl&gt;jnp://${serverName}:1099&lt;/javaNamingProviderUrl&gt;</pre><p>pros: Leight weight, and faster since it does not need a WS stack.</p><p>cons: Will only work with a jUDDIv3 server implementation.</p></div><div class="sect2" title="7.2.3. InVM Transport"><div class="titlepage"><div><div><h3 class="title"><a id="sect-InVM_transport"/>7.2.3. InVM Transport</h3></div></div></div><p>
	        If you choose to use InVM Transport this means that the jUDDIv3 server is running
	        in the same VM as you client. If you are deploying to
	        <code class="filename">juddi.war</code> the embedded server will be started by the
	        <code class="classname">org.apache.juddi.RegistryServlet</code>, but if you are running
	        outside any container, you are responsible for starting and stopping the
	        <code class="classname">org.apache.juddi.Registry</code> Service yourself. Make sure to
	        call
	        </p><pre class="programlisting">Registry.start()</pre><p>
	        before making any calls to the Registry, and when you are done using the Registry
	        (on shutdown) call
	        </p><pre class="programlisting">Registry.stop()</pre><p>
	        so the Registry can release any resources it may be holding. To use InVM Transport
	        uncomment this section in the <code class="filename">uddi.properties</code> while
	        commenting out the JAXWS and RMI Transport sections.
	        </p><pre class="programlisting">&lt;!-- InVM --&gt;
&lt;proxyTransport&gt;org.apache.juddi.v3.client.transport.InVMTransport&lt;/proxyTransport&gt;
&lt;custodyTransferUrl&gt;org.apache.juddi.api.impl.UDDICustodyTransferImpl&lt;/custodyTransferUrl&gt;
&lt;inquiryUrl&gt;org.apache.juddi.api.impl.UDDIInquiryImpl&lt;/inquiryUrl&gt;
&lt;publishUrl&gt;org.apache.juddi.api.impl.UDDIPublicationImpl&lt;/publishUrl&gt;
&lt;securityUrl&gt;org.apache.juddi.api.impl.UDDISecurityImpl&lt;/securityUrl&gt;
&lt;subscriptionUrl&gt;org.apache.juddi.api.impl.UDDISubscriptionImpl&lt;/subscriptionUrl&gt;
&lt;subscriptionListenerUrl&gt;org.apache.juddi.api.impl.UDDISubscriptionListenerImpl&lt;/subscriptionListenerUrl&gt;
&lt;juddiApiUrl&gt;org.apache.juddi.api.impl.JUDDIApiImpl&lt;/juddiApiUrl&gt;</pre><p>pros: Lightest weight, and best performant communication, and no deployment order issues
            when using auto-registration of services during deployment and undeployment.</p><p>cons: Will only work with a jUDDIv3 server implementation. Typically one would
            use a jUDDI server for each application server sharing one common database.</p></div></div><div class="sect1" title="7.3. UDDI Annotations"><div class="titlepage"><div><div><h2 class="title"><a id="chap-UDDI_annotations"/>7.3. UDDI Annotations</h2></div></div></div><div class="sect2" title="7.3.1. Introduction"><div class="titlepage"><div><div><h3 class="title"><a id="sect-intro_annotations"/>7.3.1. Introduction</h3></div></div></div><p>
        	Conventionally Services (BusinessService) and their EndPoints (BindingTemplates) are registered to a UDDI Registry using a GUI, where an
        	admin user manually adds the necessary info. This process tends to make the data in the Registry rather static
        	and the data can grow stale over time. To make the data in the UDDI more dynamic it makes sense to register
        	and EndPoint (BindingTemplate) when it comes online, which is when it gets deployed. The UDDI annotations are 
        	designed to just that: register a Service when it get deployed to an Application Server. There
        	are two annotations: UDDIService, and UDDIServiceBinding. You need to use both annotations to register an EndPoint. 
        	Upon undeployment of the Service, the EndPoint will be de-registered from the UDDI. The Service information stays
        	in the UDDI. It makes sense to leave the Service level information in the Registry since this reflects that the 
        	Service is there, however there is no EndPoint at the moment ("Check back later"). It is a manual process to remove
        	the Service information. The annotations use the juddi-client library which means that they can be used to register
        	to any UDDIv3 registry.
        </p></div><div class="sect2" title="7.3.2. UDDIService Annotation"><div class="titlepage"><div><div><h3 class="title"><a id="sect-UDDIService"/>7.3.2. UDDIService Annotation</h3></div></div></div><p>
        The UDDIService annotation is used to register a service under an already existing business in the Registry. The
        annotation should be added at the class level of the java class.
        </p><div class="table"><a id="d0e1648"/><p class="title"><strong>Table 7.3. UDDIService attributes</strong></p><div class="table-contents"><table summary="UDDIService attributes" border="1"><colgroup><col class="col1"/><col class="col2"/><col class="col3"/></colgroup><thead><tr><th>attribute</th><th>description</th><th>required</th></tr></thead><tbody><tr><td>serviceName</td><td>The name of the service, by default the clerk will use the one name specified in the WebService annotation</td><td>no</td></tr><tr><td>description</td><td>Human readable description of the service</td><td>yes</td></tr><tr><td>serviceKey</td><td>UDDI v3 Key of the Service</td><td>yes</td></tr><tr><td>businessKey</td><td>UDDI v3 Key of the Business that should own this Service. The business should exist in the registry at time of registration</td><td>yes</td></tr><tr><td>lang</td><td>Language locale which will be used for the name and description, defaults to "en" if omitted</td><td>no</td></tr><tr><td>categoryBag</td><td>Definition of a CategoryBag, see below for details</td><td>no</td></tr></tbody></table></div></div><p><br class="table-break"/>
        </p></div><div class="sect2" title="7.3.3. UDDIServiceBinding Annotation"><div class="titlepage"><div><div><h3 class="title"><a id="sect-UDDIServiceBinding"/>7.3.3. UDDIServiceBinding Annotation</h3></div></div></div><p>
            The UDDIServiceBinding annotation is used to register a BindingTemplate to the UDDI registry. This annotation
            cannot be used by itself. It needs to go along side a UDDIService annotation.
        	</p><div class="table"><a id="d0e1713"/><p class="title"><strong>Table 7.4. UDDIServiceBinding attributes</strong></p><div class="table-contents"><table summary="UDDIServiceBinding attributes" border="1"><colgroup><col class="col1"/><col class="col2"/><col class="col3"/></colgroup><thead><tr><th>attribute</th><th>description</th><th>required</th></tr></thead><tbody><tr><td>bindingKey</td><td>UDDI v3 Key of the ServiceBinding</td><td>yes</td></tr><tr><td>description</td><td>Human readable description of the service</td><td>yes</td></tr><tr><td>accessPointType</td><td>UDDI v3 AccessPointType, defaults to wsdlDeployment if omitted</td><td>no</td></tr><tr><td>accessPoint</td><td>Endpoint reference</td><td>yes</td></tr><tr><td>lang</td><td>Language locale which will be used for the name and description, defaults to "en" if omitted</td><td>no</td></tr><tr><td>tModelKeys</td><td>Comma-separated list of tModelKeys key references</td><td>no</td></tr><tr><td>categoryBag</td><td>Definition of a CategoryBag, see below for further details</td><td>no</td></tr></tbody></table></div></div><p><br class="table-break"/>
        </p><div class="sect3" title="7.3.3.1. CategoryBag Attribute"><div class="titlepage"><div><div><h4 class="title"><a id="sect-CategoryBag"/>7.3.3.1. CategoryBag Attribute</h4></div></div></div><p>
	       The CategoryBag attribute allows you to reference tModels. For example the following categoryBag
	       </p><pre class="programlisting">
&lt;categoryBag&gt;
   &lt;keyedReference tModelKey="uddi:uddi.org:categorization:types" 
    keyName="uddi-org:types:wsdl" keyValue="wsdlDeployment" /&gt; 
   &lt;keyedReference tModelKey="uddi:uddi.org:categorization:types" 
    keyName="uddi-org:types:wsdl2" keyValue="wsdlDeployment2" /&gt;
&lt;/categoryBag&gt; 
	        </pre><p>
	        can be put in like
	        </p><pre class="programlisting">
categoryBag="keyedReference=keyName=uddi-org:types:wsdl;keyValue=wsdlDeployment;" +
"tModelKey=uddi:uddi.org:categorization:types," +  
"keyedReference=keyName=uddi-org:types:wsdl2;keyValue=wsdlDeployment2;" +
"tModelKey=uddi:uddi.org:categorization:types2",
            </pre><p>
            </p></div></div><div class="sect2" title="7.3.4. WebService Example"><div class="titlepage"><div><div><h3 class="title"><a id="sect-WebServiceExample"/>7.3.4. WebService Example</h3></div></div></div><p>
        The annotations can be used on any class that defines a service. Here they are added to a WebService, a POJO with a 
        JAX-WS 'WebService' annotation.
        </p><pre class="programlisting">package org.apache.juddi.samples;

import javax.jws.WebService;
import org.apache.juddi.v3.annotations.UDDIService;
import org.apache.juddi.v3.annotations.UDDIServiceBinding;

@UDDIService(businessKey="uddi:myBusinessKey", serviceKey="uddi:myServiceKey", description = "Hello World test service")
@UDDIServiceBinding(bindingKey="uddi:myServiceBindingKey", description="WSDL endpoint for the helloWorld Service. This service is used for "
      + "testing the jUDDI annotation functionality",
    accessPointType="wsdlDeployment", accessPoint="http://localhost:8080/juddiv3-samples/services/helloworld?wsdl")
@WebService(endpointInterface = "org.apache.juddi.samples.HelloWorld", serviceName = "HelloWorld")

public class HelloWorldImpl implements HelloWorld {
    public String sayHi(String text) {
        System.out.println("sayHi called");
        return "Hello " + text;
    }
}
</pre><p>
        On deployment of this WebService, the juddi-client code will scan this class for UDDI annotations and take care of the
        registration process. In the configuration file <code class="filename">uddi.xml</code>, in the clerk section you need to reference
        the Service class 'org.apache.juddi.samples.HelloWorldImpl':
        </p><pre class="programlisting">
&lt;clerks registerOnStartup="true"&gt;
  &lt;clerk name="BobCratchit" node="default" publisher="bob" password="bob"&gt; 
    &lt;class&gt;org.apache.juddi.samples.HelloWorldImpl&lt;/class&gt;  
  &lt;/clerk&gt;
&lt;/clerks&gt;
        </pre><p>
        which means that Bob is using the node connection setting of the node with name "default", and that he will be 
        using the "bob" publisher, for which the password it "bob". There is some analogy here as to how datasources 
        for database access are defined.
        </p></div><div class="sect2" title="7.3.5. Templating keys"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1804"/>7.3.5. Templating keys</h3></div></div></div><p>
        The business, service and binding keys can contain property references. This allows you to define a
        keyTemplate in the annotation attribute for the key and the value of the properties used
        in the template will be resolved at registration time.
        </p></div></div><div class="sect1" title="7.4. Programmatic use"><div class="titlepage"><div><div><h2 class="title"><a id="sect-programmatic"/>7.4. Programmatic use</h2></div></div></div><p>
        It is also possible to use the jUDDI client code in your application. The first thing to do is
        to read the client config file, and get a handle to a clerk
      </p><pre class="programlisting">
UDDIClerkManager clerkManager = new UDDIClerkManager("META/myuddi.xml");
clerkManager.start();

UDDIClerk clerk = clerkManager.getClientConfig().getUDDIClerks().get(clerkName);
        </pre><p>
        A UDDIClerk will allow you do make authenticated requests to a UDDI server.
        </p><div class="sect2" title="7.4.1. WSDL Registration"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1817"/>7.4.1. WSDL Registration</h3></div></div></div><p>
        The OASIS UDDI spec TC put out a Techical Note on "Using WSDL in a UDDI Registry"
        [<span class="citation"><a class="xref" href="#technote.wsdl2uddi" title="Using WSDL in a UDDI Registry, Version 2.0.2">WSDL-UDDI</a></span>]. The 
        jUDDI client implements the UDDI v3 version of the WSDL2UDDI mapping as described 
        in this technical note. The registration process registers a BindingTemplate for
        each WebService EndPoint and if the BusinessService for this BindingTemplate does not
        yet exist it also registers the BusinessService along with a WSDLPortType TModel for each portType, 
        and a WSDLBinding TModel for each binding. To use it you can use the code in the 'org.apache.juddi.v3.client.mapping'
        package [<span class="citation"><a class="xref" href="#javadoc.wsdl2uddi" title="Apache jUDDI WSDL2UDDI Javadoc">WSDL2UDDI</a></span>]
        and make the following call to asynchronously register your WebService EndPoint. 
      </p><pre class="programlisting">
//Add the properties from the uddi.xml
properties.putAll(clerk.getUDDINode().getProperties());
RegistrationInfo registrationInfo = new RegistrationInfo();
registrationInfo.setServiceQName(serviceQName);
registrationInfo.setVersion(version);
registrationInfo.setPortName(portName);
registrationInfo.setServiceUrl(serviceUrl);
registrationInfo.setWsdlUrl(wsdlURL);
registrationInfo.setWsdlDefinition(wsdlDefinition);
registrationInfo.setRegistrationType(RegistrationType.WSDL);
registration = new AsyncRegistration(clerk, urlLocalizer, properties, registrationInfo);
Thread thread = new Thread(registration);
thread.start();
        </pre><p>
        This does assume that you can pass in a URL to the WSDL file as well as the WSDLDefinition.
        In most cases you will need to package up the WSDL file you are trying to register in your 
        deployment. You can get a WSDLDefinition using
        </p><pre class="programlisting">
ReadWSDL readWSDL = new ReadWSDL();
Definition definition = readWSDL.readWSDL("wsdl/HelloWorld.wsdl");
        </pre><p>
        where you would pass in the path to the WSDL on the classpath.
        </p><p>To remove a WSDL binding from the Registry you would use
        </p><pre class="programlisting">
BPEL2UDDI bpel2UDDI = new BPEL2UDDI(clerk, urlLocalizer, properties);
String serviceKey = bpel2UDDI.unRegister(serviceName, portName, serviceURL);
        </pre><p>
        If this is the last BindingTemplate for the BusinessService it will also remove the 
        BusinessService along with the WSDLPortType and WSDLBinding TModels. The
        lifecycle is registration on Endpoint deploy and unregistration on Endpoint undeploy.
        </p></div><div class="sect2" title="7.4.2. BPEL Process Registration"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1839"/>7.4.2. BPEL Process Registration</h3></div></div></div><p>Similar to the WSDL to UDDI mapping there is a BPEL to UDDI mapping Technical
        Note [<span class="citation"><a class="xref" href="#technote.bpel2uddi" title="Using BPEL4WS in a UDDI registry">BPEL-UDDI</a></span>]. 
        The jUDDI client also implements this mapping. Using it is very similar to 
        code fragment listed for the WSDL Registration, with the only change being that in this case
        the RegistrationInfo.RegistrationType should be RegistrationType.BPEL. See To use it you can use the code in the 'org.apache.juddi.v3.client.mapping'
        package [<span class="citation"><a class="xref" href="#javadoc.bpel2uddi" title="Apache jUDDI BPEL2UDDI Javadoc">BPEL2UDDI</a></span>]
        for more information on the implementation. For an example use of the registration process
        see the JBoss RiftSaw project [<span class="citation"><a class="xref" href="#java.bpel2uddi" title="JBoss RiftSaw UDDI Registration">RFTSW-UDDI</a></span>].
        </p></div><div class="sect2" title="7.4.3. Conventions around UDDIv3 registration"><div class="titlepage"><div><div><h3 class="title"><a id="d0e1853"/>7.4.3. Conventions around UDDIv3 registration</h3></div></div></div><div class="sect3" title="7.4.3.1. Key Templates"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1856"/>7.4.3.1. Key Templates</h4></div></div></div><p>
            Both the WSDL and BPEL registration code use a key format convention to construct UDDI v3 keys. The
            format of the keys can be defined in the properties section of the <code class="filename">uddi.xml</code>, but
            they have reasonable defaults. Note that the both the serviceName and portName are obtained from 
            the RegistrationInfo. The nodeName can be obtained from the environment, or set in the 
            <code class="filename">uddi.xml</code>.
            </p><table title="Key Templates and related properties" id="d0e1867"><tr><th>Property</th><th>Description</th><th>Required</th><th>Default Value</th></tr><tr><td>lang</td><td>The language setting used by the registration.</td><td>no</td><td>en</td></tr><tr><td>businessName</td><td>The business name which is used by.</td><td>yes</td><td/></tr><tr><td>keyDomain</td><td>The key domain key part (used by the key formats)</td><td>yes</td></tr><tr><td>businessKeyFormat</td><td>Key format used to contruct the Business Key</td><td>no</td><td>uddi:${keyDomain}:business_${businessName}</td></tr><tr><td>serviceKeyFormat</td><td>Key format used to contruct the BusinessService Key</td><td>no</td><td>uddi:${keyDomain}:service_${serviceName}</td></tr><tr><td>bindingKeyFormat</td><td>Key format used to contruct the TemplateBinding Key</td><td>no</td><td>uddi:${keyDomain}:binding_${nodeName}_${serviceName}_${portName}</td></tr><tr><td>serviceDescription</td><td>Default BusinessService description</td><td>no</td><td>Default service description when no &lt;wsdl:document&gt; element is defined inside the &lt;wsdl:service&gt; element.</td></tr><tr><td>bindingDescription</td><td>Default BindingTemplate description</td><td>no</td><td>Default binding description when no &lt;wsdl:document&gt; element is defined inside the &lt;wsdl:binding&gt; element.</td></tr></table><p>
            
            </p></div><div class="sect3" title="7.4.3.2. Specification of service and binding descriptions in the WSDL"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1947"/>7.4.3.2. Specification of service and binding descriptions in the WSDL</h4></div></div></div><p>The UDDI spec allows for setting a human readable description on both the BusinessService and TemplateBinding. Theses description fields
            are important if humans are browsing the registry. A default description can be specific in the <code class="filename">uddi.xml</code>, however
            it makes a lot more sense to have a specific description for each service and binding, and so the registration code tries to obtain these
            descriptions from the &lt;wsdl:document&gt; tags in the WSDL, which can be nested as a child element inside the
             &lt;wsdl:service&gt; and &lt;wsdl:binding&gt; elements.
            </p></div><div class="sect3" title="7.4.3.3. URLLocalizer"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1955"/>7.4.3.3. URLLocalizer</h4></div></div></div><p>The setting of the EndPoint URL is obtained from provided WSDL in the &lt;soap:addressbinding&gt; of the
            &lt;wsdl:port&gt;. The issue with this is that this URL is static, and you it is very useful if it can
            be made more dynamic. For this reason you can implement your own version of the <a class="ulink" href="http://svn.apache.org/repos/asf/juddi/trunk/juddi-client/src/main/java/org/apache/juddi/v3/client/mapping/URLLocalizer.java">
            URLLocalizer interface</a>. In for example the version <a class="ulink" href="http://anonsvn.jboss.org/repos/riftsaw/trunk/runtime/uddi/src/main/java/org/jboss/soa/bpel/uddi/JBossURLLocalizer.java">
            shipped with RiftSaw</a> the protocol and the host parts of the URL are overriden with the
            settings obtain from the local WebService Stack.</p></div></div></div><div class="sect1" title="7.5. Dynamic UDDI Service Lookup"><div class="titlepage"><div><div><h2 class="title"><a id="sect-service-lookup"/>7.5. Dynamic UDDI Service Lookup</h2></div></div></div><p>For a client application to invoke a Service it needs to know the actual binding information of
        the WebService EndPoint. This information can be statically stored at the clientside but this will make
        the system very rigid. For example if a service moves from one server to another the client will not
        pick up this change. It therefor makes sense to do a lookup into the UDDI registry to obtain fresh)
        binding information. This will make the solution dynamic, and allows for clients simply following
        the changes that occur in the service deployment topology. 
        </p><div class="sect2" title=".1. Service Locator"><div class="titlepage"><div><div><h3 class="title"><a id="sect-service-locator"/>.1. Service Locator</h3></div></div></div><p>The serviceLocator [<span class="citation"><a class="xref" href="#javadoc.servicelocator" title="Apache jUDDI ServiceLocator Javadoc">SERV-LOC</a></span>]
            can be used to locate a service binding knowing the service and port name. The following
            piece of code demonstrates how to do a lookup:
            </p><pre class="programlisting">
ServiceLocator serviceLocator = new ServiceLocator(clerk, urlLocalizer, properties);
String endPointURL = lookupEndpoint(serviceQName, String portName);
            </pre><p>
            </p></div><p>
        
        When the above UDDI v3 serviceKey conventions are 
        followed, then all the client needs to know is the serviceName and portName it want to invoke and the
        
        
        
        The downside of doing a service lookup before each service invokation is that
        it will have a performance inpact.
        
        </p></div><div class="sect1" title="7.6. Dependencies"><div class="titlepage"><div><div><h2 class="title"><a id="sect-dependencies"/>7.6. Dependencies</h2></div></div></div><p>
        The UDDI client depends on <code class="filename">uddi-ws-3.x.jar</code>,
        <code class="filename">commons-configuration-1.5.jar</code>,
        <code class="filename">commons-collection-3.2.1.jar</code> and
        <code class="filename">log4j-1.2.13.jar</code>, plus
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                libraries for JAXB if you are not using JDK5.
                </p></li><li class="listitem"><p>
                JAXWS client libraries when using JAXWS transport (like CXF).
                </p></li><li class="listitem"><p>
                RMI and JNDI client libraries  when using RMI Transport.
                </p></li></ul></div></div><div class="sect1" title="7.7. Sample Code"><div class="titlepage"><div><div><h2 class="title"><a id="sect-sample_code"/>7.7. Sample Code</h2></div></div></div><p>
        Sample code on how to use the UDDI client can be found in the
        <code class="literal">uddi-client</code> module on the jUDDIv3 project. Usually the first
        thing you want to is to make a call to the Registry to obtain an Authentication
        Token. The following code is taken from the unit tests in this module.
        </p><pre class="programlisting">public void testAuthToken() {
    try {
        String clazz = ClientConfig.getConfiguration().getString(
            Property.UDDI_PROXY_TRANSPORT,Property.DEFAULT_UDDI_PROXY_TRANSPORT);
        Class&lt;?&gt; transportClass = Loader.loadClass(clazz);
        if (transportClass!=null) {
            Transport transport = (Transport) transportClass.newInstance();
            UDDISecurityPortType securityService = transport.getSecurityService();
            GetAuthToken getAuthToken = new GetAuthToken();
            getAuthToken.setUserID("root");
            getAuthToken.setCred("");
            AuthToken authToken = securityService.getAuthToken(getAuthToken);
            System.out.println(authToken.getAuthInfo());
            Assert.assertNotNull(authToken);
        } else {
            Assert.fail();
        }
    } catch (Exception e) {
        e.printStackTrace();
        Assert.fail();
    } 
}</pre><p>
        Make sure that the publisher, in this case “root” is an existing publisher in the
        Registry and that you are supplying the correct credential to get a successful
        response. If needed check <a class="xref" href="#chap-Authentication" title="Chapter 3. Authentication">Chapter 3, <em>Authentication</em></a> to learn more
        about this subject.
        </p><p>
        Another place to look for sample code is the <code class="filename">docs/examples/helloword</code> 
        directory. Alternatively you can use annotations.
        </p></div><div class="sect1" title="7.8. References"><div class="titlepage"><div><div><h2 class="title"><a id="sect-references"/>7.8. References</h2></div></div></div><div class="bibliolist"><div class="biblioentry" title="Using WSDL in a UDDI Registry, Version 2.0.2"><a id="technote.wsdl2uddi"/><p>[<abbr class="abbrev"><a id="technote.wsdl2uddi.abbrev"/>WSDL-UDDI</abbr>] <span class="authorgroup">by <span class="firstname">John</span> <span class="surname">Colgrave</span> and <span class="firstname">Karsten</span> <span class="surname">Januszewski</span>. </span><span class="title"><em><a class="ulink" href="http://www.oasis-open.org/committees/uddi-spec/doc/tn/uddi-spec-tc-tn-wsdl-v2.htm">Using WSDL in a UDDI Registry, Version 2.0.2</a></em>. </span><span class="publishername">OASIS UDDI Spec TC. </span><span class="pubdate">2004. </span></p></div><div class="biblioentry" title="Apache jUDDI WSDL2UDDI Javadoc"><a id="javadoc.wsdl2uddi"/><p>[<abbr class="abbrev"><a id="javadoc.wsdl2uddi.abbrev"/>WSDL2UDDI</abbr>] <span class="title"><em><a class="ulink" href="http://juddi.apache.org/apidocs/org/apache/juddi/v3/client/mapping/WSDL2UDDI.html">Apache jUDDI WSDL2UDDI Javadoc</a></em>. </span><span class="publishername">Apache jUDDI. </span><span class="pubdate">2011. </span></p></div><div class="biblioentry" title="Using BPEL4WS in a UDDI registry"><a id="technote.bpel2uddi"/><p>[<abbr class="abbrev"><a id="technote.bpel2uddi.abbrev"/>BPEL-UDDI</abbr>] <span class="authorgroup">by <span class="firstname">Claus</span> <span class="surname">von Riegen</span> and <span class="firstname">Ivana</span> <span class="surname">Trickovic</span>. </span><span class="title"><em><a class="ulink" href="http://www.oasis-open.org/committees/uddi-spec/doc/tn/uddi-spec-tc-tn-bpel.htm">Using BPEL4WS in a UDDI registry</a></em>. </span><span class="publishername">OASIS UDDI Spec TC. </span><span class="pubdate">2004. </span></p></div><div class="biblioentry" title="Apache jUDDI BPEL2UDDI Javadoc"><a id="javadoc.bpel2uddi"/><p>[<abbr class="abbrev"><a id="javadoc.bpel2uddi.abbrev"/>BPEL2UDDI</abbr>] <span class="title"><em><a class="ulink" href="http://juddi.apache.org/apidocs/org/apache/juddi/v3/client/mapping/BPEL2UDDI.html">Apache jUDDI BPEL2UDDI Javadoc</a></em>. </span><span class="publishername">Apache jUDDI. </span><span class="pubdate">2011. </span></p></div><div class="biblioentry" title="JBoss RiftSaw UDDI Registration"><a id="java.bpel2uddi"/><p>[<abbr class="abbrev"><a id="java.bpel2uddi.abbrev"/>RFTSW-UDDI</abbr>] <span class="title"><em><a class="ulink" href="http://anonsvn.jboss.org/repos/riftsaw/trunk/runtime/uddi/src/main/java/org/jboss/soa/bpel/uddi/UDDIRegistrationImpl.java">JBoss RiftSaw UDDI Registration</a></em>. </span><span class="publishername">JBoss Riftsaw. </span><span class="pubdate">2011. </span></p></div><div class="biblioentry" title="Apache jUDDI ServiceLocator Javadoc"><a id="javadoc.servicelocator"/><p>[<abbr class="abbrev"><a id="javadoc.servicelocator.abbrev"/>SERV-LOC</abbr>] <span class="title"><em><a class="ulink" href="http://juddi.apache.org/apidocs/org/apache/juddi/v3/client/mapping/ServiceLocator.html">Apache jUDDI ServiceLocator Javadoc</a></em>. </span><span class="publishername">Apache jUDDI. </span><span class="pubdate">2011. </span></p></div></div></div></div><div class="chapter" title="Chapter 8. Simple Publishing Using the jUDDI API"><div class="titlepage"><div><div><h2 class="title"><a id="chap-SimplePublish"/>Chapter 8. Simple Publishing Using the jUDDI API</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#d0e2131">8.1. UDDI Data Model</a></span></dt><dt><span class="section"><a href="#d0e2157">8.2. jUDDI Additions to the Model</a></span></dt><dt><span class="section"><a href="#d0e2170">8.3. UDDI and jUDDI API</a></span></dt><dt><span class="section"><a href="#d0e2208">8.4. Getting Started</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2216">8.4.1. Simple Publishing Example</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e2258">8.5. Conclusion</a></span></dt></dl></div><p>
    One of the most common requests we get on the message board is “How do I publish a service using jUDDI?” This question holds a wide berth, as it can result anywhere from not understanding the UDDI data model, to confusion around how jUDDI is set up, to the
    order of steps required to publish artifacts in the registry, to general use of the API – and everything in between. This article will attempt to answer this “loaded” question and, while not going into too much detail, will hopefully clear some of the
    confusion about publishing into the jUDDI registry.
  </p><div class="section" title="8.1. UDDI Data Model"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2131"/>8.1. UDDI Data Model</h2></div></div></div><p>
      Before you begin publishing artifacts, you need to know exactly how to break down your data into the UDDI model. This topic is covered extensively in the specification, particularly in section 3, so I only want to gloss over some for details. Readers
      interested in more extensive coverage should most definitely take a look at the UDDI specification.
    </p><p>
      Below is a great diagram of the UDDI data model (taken directly from the specification):
    </p><div class="figure"><a id="fig-UDDI-coredatastructures"/><div class="figure-contents"><div class="mediaobject"><img src="images/uddi_core_datastructures.gif" alt="UDDI core data structures"/></div></div><p class="title"><strong>Figure 8.1. UDDI Core Data Structures</strong></p></div><br class="figure-break"/><p>
      As you can see, data is organized into a hierarchical pattern. Business Entities are at the top of the pyramid, they contain Business Services and those services in turn contain Binding Templates. TModels (or technical models) are a catch-all structure
      that can do anything from categorize one of the main entities, describe the technical details of a binding (ex. protocols, transports, etc), to registering a key partition. TModels won’t be covered too much in this article as I want to focus on the
      three main UDDI entities.
    </p><p>
      The hierarchy defined in the diagram is self-explanatory. You must first have a Business Entity before you can publish any services. And you must have a Business Service before you can publish a Binding Template. There is no getting around this structure;
      this is the way UDDI works.
    </p><p>
      Business Entities describe the organizational unit responsible for the services it publishes. It generally consist of a description and contact information. How one chooses to use the Business Entity is really dependent on the particular case. If you’re one
      small company, you will likely just have one Business Entity. If you are a larger company with multiple departments, you may want to have a Business Entity per department. (The question may arise if you can have one uber-Business Entity and multiple
      child Business Entities representing the departments. The answer is yes, you can relate Business Entities using Publisher Assertions, but that is beyond the scope of this article.)
    </p><p>
      Business Services are the cogs of the SOA landscape. They represent units of functionality that are consumed by clients. In UDDI, there’s not much to a service structure; mainly descriptive information like name, description and categories. The meat of the
      technical details about the service is contained in its child Binding Templates.
    </p><p>
      Binding Templates, as mentioned above, give the details about the technical specification of the service. This can be as simple as just providing the service’s access point, to providing the location of the service WSDL to more complicated scenarios to
      breaking down the technical details of the WSDL (when used in concert with tModels). Once again, getting into these scenarios is beyond the scope of this article but may be the subject of future articles.
    </p></div><div class="section" title="8.2. jUDDI Additions to the Model"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2157"/>8.2. jUDDI Additions to the Model</h2></div></div></div><p>
      Out of the box, jUDDI provides some additional structure to the data model described in the specification. Primarily, this is the concept of the Publisher.
    </p><p>
      The UDDI specification talks about ownership of the entities that are published within the registry, but makes no mention about how ownership should be handled. Basically, it is left up to the particular implementation to decide how to handle “users” that
      have publishing rights in the registry.
    </p><p>
      Enter the jUDDI Publisher. The Publisher is essentially an out-of-the-box implementation of an identity management system. Per the specification, before assets can be published into the registry, a “publisher” must authenticate with the registry by
      retrieving an authorization token. This authorization token is then attached to future publish calls to assign ownership to the published entities.
    </p><p>
      jUDDI’s Publisher concept is really quite simple, particularly when using the default authentication. You can save a Publisher to the registry using jUDDI’s custom API and then use that Publisher to publish your assets into the registry. jUDDI allows for
      integration into your own identity management system, circumventing the Publisher entirely if desired. This is discussed in more detail in the documentation, but for purposes of this article, we will be using the simple out-of-the-box Publisher
      solution.
    </p><p>
      One quick note: ownership is essentially assigned to a given registry entity by using its “authorizedName” field. The “authorizedName” field is defined in the specification in the operationalInfo structure which keeps track of operational info for each
      entity.
    </p></div><div class="section" title="8.3. UDDI and jUDDI API"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2170"/>8.3. UDDI and jUDDI API</h2></div></div></div><p>
      Knowing the UDDI data model is all well and good. But to truly interact with the registry, you need to know how the UDDI API is structured and how jUDDI implements this API. The UDDI API is covered in great detail in chapter 5 of the specification but will be
      summarized here.
    </p><p>
      UDDI divides their API into several “sets” – each representing a specific area of functionality. The API sets are listed below:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          Inquiry – deals with querying the registry to return details on entities within
        </p></li><li class="listitem"><p>
          Publication – handles publishing entities into the registry
        </p></li><li class="listitem"><p>
          Security – open-ended specification that handles authentication
        </p></li><li class="listitem"><p>
          Custody and Ownership Transfer – deals with transferring ownership and custody of entities
        </p></li><li class="listitem"><p>
          Subscription – allows clients to retrieve information on entities in a timely manner using a subscription format
        </p></li><li class="listitem"><p>
          Subscription Listener – client API that accepts subscription results
        </p></li><li class="listitem"><p>
          Value Set (Validation and Caching)– validates keyed reference values (not implemented by jUDDI)
        </p></li><li class="listitem"><p>
          Replication – deals with federation of data between registry nodes (not implemented by jUDDI)
        </p></li></ul></div><p>
      The most commonly used APIs are the Inquiry, Publication and Security APIs. These APIs provide the standard functions for interacting with the registry.
    </p><p>
      The jUDDI server implements each of these API sets as a JAX-WS compliant web service and each method defined in the API set is simply a method in the corresponding web service. The client module provided by jUDDI uses a “transport” class that defines how
      the call is to be made. The default transport uses JAX-WS but there are several alternative ways to make calls to the API. Please refer to the documentation for more information.
    </p><p>
      One final note, jUDDI defines its own API set. This API set contains methods that deal with handling Publishers as well as other useful maintenance functions (mostly related to jUDDI’s subscription model). This API set is obviously proprietary to jUDDI and
      therefore doesn’t conform to the UDDI specification.
    </p></div><div class="section" title="8.4. Getting Started"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2208"/>8.4. Getting Started</h2></div></div></div><p>
      Now that we’ve covered the basics of the data model and API sets, it’s time to get started with the publishing sample. The first thing that must happen is to get the jUDDI server up and running. Please refer to this
      <a class="ulink" href="http://apachejuddi.blogspot.com/2010/02/getting-started-with-juddi-v3.html">article</a>
      that explains how to start the jUDDI server.
    </p><div class="section" title="8.4.1. Simple Publishing Example"><div class="titlepage"><div><div><h3 class="title"><a id="d0e2216"/>8.4.1. Simple Publishing Example</h3></div></div></div><p>
        We will now go over the “simple-publish” example found in the documentation. This sample expands upon the HelloWorld example in that after retrieving an authentication token, a Publisher, BusinessEntity and BusinessService are published to the registry.
      </p><p>
        The sample consists of only one class: SimplePublish. Let’s start by taking a look at the constructor:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">SimplePublish</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">try</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;clazz&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">UDDIClientContainer</span><span class="java_separator">.</span><span class="java_plain">getUDDIClerkManager</span><span class="java_separator">(</span><span class="java_literal">null</span><span class="java_separator">).</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getClientConfig</span><span class="java_separator">().</span><span class="java_plain">getUDDINode</span><span class="java_separator">(</span><span class="java_literal">&quot;default&quot;</span><span class="java_separator">).</span><span class="java_plain">getProxyTransport</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Class</span><span class="java_operator">&lt;?&gt;</span><span class="java_plain">&nbsp;transportClass&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_type">ClassUtil</span><span class="java_separator">.</span><span class="java_plain">forName</span><span class="java_separator">(</span><span class="java_plain">clazz</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">Transport</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">if</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_plain">transportClass</span><span class="java_operator">!=</span><span class="java_literal">null</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Transport</span><span class="java_plain">&nbsp;transport&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Transport</span><span class="java_separator">)</span><span class="java_plain">&nbsp;transportClass</span><span class="java_separator">.</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getConstructor</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">).</span><span class="java_plain">newInstance</span><span class="java_separator">(</span><span class="java_literal">&quot;default&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;security&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;transport</span><span class="java_separator">.</span><span class="java_plain">getUDDISecurityService</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;juddiApi&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;transport</span><span class="java_separator">.</span><span class="java_plain">getJUDDIApiService</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;publish&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;transport</span><span class="java_separator">.</span><span class="java_plain">getUDDIPublishService</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;</span><span class="java_keyword">catch</span><span class="java_plain">&nbsp;</span><span class="java_separator">(</span><span class="java_type">Exception</span><span class="java_plain">&nbsp;e</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e</span><span class="java_separator">.</span><span class="java_plain">printStackTrace</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span><span class="java_plain">&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>
        The constructor uses the jUDDI client API to retrieve the transport from the default node.  You can refer to the documentation if you’re confused about how clerks and nodes work.  Suffice it to say, we are simply retrieving the default client transport class which 
        is designed to make UDDI calls out using JAX-WS web services.
      </p><p>
        Once the transport is instantiated, we grab the three API sets we need for this demo:  1) the Security API set so we can get authorization tokens, 2) the proprietary jUDDI API set so we can save a Publisher and 3) the Publication API set so we can actually publish 
        entities to the registry.
      </p><p>
        All the magic happens in the publish method.  We will look at that next.
      </p><p>
        Here are the first few lines of the publish method:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Setting</span><span class="java_plain">&nbsp;up&nbsp;the&nbsp;values&nbsp;to&nbsp;get&nbsp;an&nbsp;authentication&nbsp;token&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;the&nbsp;</span><span class="java_literal">'root'</span><span class="java_plain">&nbsp;user&nbsp;</span><span class="java_separator">(</span><span class="java_literal">'root'</span><span class="java_plain">&nbsp;user&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;has&nbsp;admin&nbsp;privileges&nbsp;and&nbsp;can&nbsp;save&nbsp;other&nbsp;publishers</span><span class="java_separator">).</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">GetAuthToken</span><span class="java_plain">&nbsp;getAuthTokenRoot&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">GetAuthToken</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getAuthTokenRoot</span><span class="java_separator">.</span><span class="java_plain">setUserID</span><span class="java_separator">(</span><span class="java_literal">&quot;root&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getAuthTokenRoot</span><span class="java_separator">.</span><span class="java_plain">setCred</span><span class="java_separator">(</span><span class="java_literal">&quot;&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Making</span><span class="java_plain">&nbsp;API&nbsp;call&nbsp;that&nbsp;retrieves&nbsp;the&nbsp;authentication&nbsp;token&nbsp;</span><span class="java_keyword">for</span><span class="java_plain">&nbsp;the&nbsp;</span><span class="java_literal">'root'</span><span class="java_plain">&nbsp;user</span><span class="java_separator">.</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">AuthToken</span><span class="java_plain">&nbsp;rootAuthToken&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;security</span><span class="java_separator">.</span><span class="java_plain">getAuthToken</span><span class="java_separator">(</span><span class="java_plain">getAuthTokenRoot</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">System</span><span class="java_separator">.</span><span class="java_plain">out</span><span class="java_separator">.</span><span class="java_plain">println&nbsp;</span><span class="java_separator">(</span><span class="java_literal">&quot;root&nbsp;AUTHTOKEN&nbsp;=&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;rootAuthToken</span><span class="java_separator">.</span><span class="java_plain">getAuthInfo</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>
        This code simply gets the authorization token for the ‘root’ user.   The ‘root’ user (or publisher) is automatically installed in every jUDDI instance and acts as the “administrator” for jUDDI API calls.  Additionally, the ‘root’ user is the owning 
        publisher for all the initial services installed with jUDDI.  You may be wondering what those “initial services” are.  Well, since the UDDI API sets are all implemented as web services by jUDDI, every jUDDI node actually registers those services inside 
        itself.  This is done per the specification.
      </p><p>
        Let’s get back to the code.  Now that we have root authorization, we can add a publisher:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Creating</span><span class="java_plain">&nbsp;a&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;publisher&nbsp;that&nbsp;we&nbsp;will&nbsp;use&nbsp;to&nbsp;publish&nbsp;our&nbsp;entities&nbsp;to</span><span class="java_separator">.</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Publisher</span><span class="java_plain">&nbsp;p&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Publisher</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p</span><span class="java_separator">.</span><span class="java_plain">setAuthorizedName</span><span class="java_separator">(</span><span class="java_literal">&quot;my-publisher&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p</span><span class="java_separator">.</span><span class="java_plain">setPublisherName</span><span class="java_separator">(</span><span class="java_literal">&quot;My&nbsp;Publisher&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Adding</span><span class="java_plain">&nbsp;the&nbsp;publisher&nbsp;to&nbsp;the&nbsp;</span><span class="java_literal">&quot;save&quot;</span><span class="java_plain">&nbsp;structure</span><span class="java_separator">,</span><span class="java_plain">&nbsp;using&nbsp;the&nbsp;</span><span class="java_literal">'root'</span><span class="java_plain">&nbsp;user&nbsp;authentication&nbsp;info&nbsp;and&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;saving&nbsp;away</span><span class="java_separator">.</span><span class="java_plain">&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">SavePublisher</span><span class="java_plain">&nbsp;sp&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">SavePublisher</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sp</span><span class="java_separator">.</span><span class="java_plain">getPublisher</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">p</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sp</span><span class="java_separator">.</span><span class="java_plain">setAuthInfo</span><span class="java_separator">(</span><span class="java_plain">rootAuthToken</span><span class="java_separator">.</span><span class="java_plain">getAuthInfo</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;juddiApi</span><span class="java_separator">.</span><span class="java_plain">savePublisher</span><span class="java_separator">(</span><span class="java_plain">sp</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>
        Here we’ve simply used the jUDDI API to save a publisher with authorized name “my-publisher”.  Notice how the authorization token for the ‘root’ user is used.  Next, we need to get the authorization token for this new publisher:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Our</span><span class="java_plain">&nbsp;publisher&nbsp;is&nbsp;now&nbsp;saved</span><span class="java_separator">,</span><span class="java_plain">&nbsp;so&nbsp;now&nbsp;we&nbsp;want&nbsp;to&nbsp;retrieve&nbsp;its&nbsp;authentication&nbsp;token</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">GetAuthToken</span><span class="java_plain">&nbsp;getAuthTokenMyPub&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">GetAuthToken</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getAuthTokenMyPub</span><span class="java_separator">.</span><span class="java_plain">setUserID</span><span class="java_separator">(</span><span class="java_literal">&quot;my-publisher&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getAuthTokenMyPub</span><span class="java_separator">.</span><span class="java_plain">setCred</span><span class="java_separator">(</span><span class="java_literal">&quot;&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">AuthToken</span><span class="java_plain">&nbsp;myPubAuthToken&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;security</span><span class="java_separator">.</span><span class="java_plain">getAuthToken</span><span class="java_separator">(</span><span class="java_plain">getAuthTokenMyPub</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">System</span><span class="java_separator">.</span><span class="java_plain">out</span><span class="java_separator">.</span><span class="java_plain">println&nbsp;</span><span class="java_separator">(</span><span class="java_literal">&quot;myPub&nbsp;AUTHTOKEN&nbsp;=&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;myPubAuthToken</span><span class="java_separator">.</span><span class="java_plain">getAuthInfo</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>
        This is pretty straightforward.  You’ll note that no credentials have been set on both authorization calls.  This is because we’re using the default authenticator which doesn’t require credentials.  We have our authorization token for our new 
        publisher, now we can simply publish away:
      </p><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"></span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Creating</span><span class="java_plain">&nbsp;the&nbsp;parent&nbsp;business&nbsp;entity&nbsp;that&nbsp;will&nbsp;contain&nbsp;our&nbsp;service</span><span class="java_separator">.</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BusinessEntity</span><span class="java_plain">&nbsp;myBusEntity&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">BusinessEntity</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Name</span><span class="java_plain">&nbsp;myBusName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Name</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myBusName</span><span class="java_separator">.</span><span class="java_plain">setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;My&nbsp;Business&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myBusEntity</span><span class="java_separator">.</span><span class="java_plain">getName</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">myBusName</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Adding</span><span class="java_plain">&nbsp;the&nbsp;business&nbsp;entity&nbsp;to&nbsp;the&nbsp;</span><span class="java_literal">&quot;save&quot;</span><span class="java_plain">&nbsp;structure</span><span class="java_separator">,</span><span class="java_plain">&nbsp;using&nbsp;our&nbsp;publisher's&nbsp;authentication&nbsp;info&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;and&nbsp;saving&nbsp;away</span><span class="java_separator">.</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">SaveBusiness</span><span class="java_plain">&nbsp;sb&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">SaveBusiness</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sb</span><span class="java_separator">.</span><span class="java_plain">getBusinessEntity</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">myBusEntity</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sb</span><span class="java_separator">.</span><span class="java_plain">setAuthInfo</span><span class="java_separator">(</span><span class="java_plain">myPubAuthToken</span><span class="java_separator">.</span><span class="java_plain">getAuthInfo</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BusinessDetail</span><span class="java_plain">&nbsp;bd&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;publish</span><span class="java_separator">.</span><span class="java_plain">saveBusiness</span><span class="java_separator">(</span><span class="java_plain">sb</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;myBusKey&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;bd</span><span class="java_separator">.</span><span class="java_plain">getBusinessEntity</span><span class="java_separator">().</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_literal">0</span><span class="java_separator">).</span><span class="java_plain">getBusinessKey</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">System</span><span class="java_separator">.</span><span class="java_plain">out</span><span class="java_separator">.</span><span class="java_plain">println</span><span class="java_separator">(</span><span class="java_literal">&quot;myBusiness&nbsp;key:&nbsp;&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;myBusKey</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Creating</span><span class="java_plain">&nbsp;a&nbsp;service&nbsp;to&nbsp;save</span><span class="java_separator">.</span><span class="java_plain">&nbsp;&nbsp;</span><span class="java_type">Only</span><span class="java_plain">&nbsp;adding&nbsp;the&nbsp;minimum&nbsp;data</span><span class="java_operator">:</span><span class="java_plain">&nbsp;the&nbsp;parent&nbsp;business&nbsp;key&nbsp;retrieved&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">from&nbsp;saving&nbsp;the&nbsp;business&nbsp;above&nbsp;and&nbsp;a&nbsp;single&nbsp;name</span><span class="java_separator">.</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">BusinessService</span><span class="java_plain">&nbsp;myService&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">BusinessService</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myService</span><span class="java_separator">.</span><span class="java_plain">setBusinessKey</span><span class="java_separator">(</span><span class="java_plain">myBusKey</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Name</span><span class="java_plain">&nbsp;myServName&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">Name</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myServName</span><span class="java_separator">.</span><span class="java_plain">setValue</span><span class="java_separator">(</span><span class="java_literal">&quot;My&nbsp;Service&quot;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myService</span><span class="java_separator">.</span><span class="java_plain">getName</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">myServName</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Add</span><span class="java_plain">&nbsp;binding&nbsp;templates</span><span class="java_separator">,</span><span class="java_plain">&nbsp;etc</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;</span><span class="java_type">Adding</span><span class="java_plain">&nbsp;the&nbsp;service&nbsp;to&nbsp;the&nbsp;</span><span class="java_literal">&quot;save&quot;</span><span class="java_plain">&nbsp;structure</span><span class="java_separator">,</span><span class="java_plain">&nbsp;using&nbsp;our&nbsp;publisher's&nbsp;authentication&nbsp;info&nbsp;and&nbsp;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">&nbsp;saving&nbsp;away</span><span class="java_separator">.</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">SaveService</span><span class="java_plain">&nbsp;ss&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">SaveService</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss</span><span class="java_separator">.</span><span class="java_plain">getBusinessService</span><span class="java_separator">().</span><span class="java_plain">add</span><span class="java_separator">(</span><span class="java_plain">myService</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss</span><span class="java_separator">.</span><span class="java_plain">setAuthInfo</span><span class="java_separator">(</span><span class="java_plain">myPubAuthToken</span><span class="java_separator">.</span><span class="java_plain">getAuthInfo</span><span class="java_separator">());</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">ServiceDetail</span><span class="java_plain">&nbsp;sd&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;publish</span><span class="java_separator">.</span><span class="java_plain">saveService</span><span class="java_separator">(</span><span class="java_plain">ss</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;myServKey&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;sd</span><span class="java_separator">.</span><span class="java_plain">getBusinessService</span><span class="java_separator">().</span><span class="java_plain">get</span><span class="java_separator">(</span><span class="java_literal">0</span><span class="java_separator">).</span><span class="java_plain">getServiceKey</span><span class="java_separator">();</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">System</span><span class="java_separator">.</span><span class="java_plain">out</span><span class="java_separator">.</span><span class="java_plain">println</span><span class="java_separator">(</span><span class="java_literal">&quot;myService&nbsp;key:&nbsp;&nbsp;&quot;</span><span class="java_plain">&nbsp;</span><span class="java_operator">+</span><span class="java_plain">&nbsp;myServKey</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></pre><p>
        To summarize, here we have created and saved a BusinessEntity and then created and saved a BusinessService.  We’ve just added the bare minimum data to each entity (and in fact, have not added any BindingTemplates to the service).  Obviously, you 
        would want to fill out each structure with greater information, particularly with services.  However, this is beyond the scope of this article, which aims to simply show you how to programmatically publish entities.
      </p><p>
        There are a couple important notes regarding the use of entity keys.  Version 3 of the specification allows for publishers to create their own keys but also instructs implementers to have a default method.  Here we have gone with the default 
        implementation by leaving each entity’s “key” field blank in the save call.  jUDDI’s default key generator simply takes the node’s partition and appends a GUID.  In a default installation, it will look something like this:
      </p><div class="blockquote"><blockquote class="blockquote"><p>
          uddi:juddi.apache.org:&lt;GUID&gt;
        </p></blockquote></div><p>
        You can, of course, customize all of this, but that is left for another article.  The second important point is that when the BusinessService is saved, I’ve had to explicitly set its parent business key (retrieved from previous call saving the 
        business).  This is a necessary step when the service is saved in an independent call like this.  Otherwise you would get an error because jUDDI won’t know where to find the parent entity.  I could have added this service to the BusinessEntity’s service 
        collection and saved it with the call to saveBusiness.  In that scenario I would not have to set the parent business key.
      </p></div></div><div class="section" title="8.5. Conclusion"><div class="titlepage"><div><div><h2 class="title"><a id="d0e2258"/>8.5. Conclusion</h2></div></div></div><p>
      That does it for this article.  Hopefully I managed to clear some of the confusion around the open-ended question, “How do I publish a service using jUDDI?”.
    </p></div></div><div class="chapter" title="Chapter 9. Subscription"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Subscription"/>Chapter 9. Subscription</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-subscription_intro">9.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-Two_node_example">9.2. Two node example setup: Sales and Marketing</a></span></dt><dt><span class="section"><a href="#sect-deploy_HelloSales_service">9.3. Deploy the HelloSales Service</a></span></dt><dt><span class="section"><a href="#sect-config_user_create_subscription">9.4. Configure a user to create Subscriptions</a></span></dt><dt><span class="section"><a href="#sect-synchronous_notifications">9.5. Synchronous Notifications</a></span></dt></dl></div><div class="section" title="9.1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="sect-subscription_intro"/>9.1. Introduction</h2></div></div></div><p>
        Subscriptions come to play in a multi-registry setup. Within your company you may
        have the need to run with more then one UDDI, let's say one for each department,
        where you limit access to the systems in each department to just their own UDDI
        node. However you may want to share some services cross departments. The
        subscription API can help you cross registering those services and keeping them up
        to date by sending out notifications as the registry information in the parent
        UDDI changes.
        </p><p>
        There are two type of subscriptions:
        </p><div class="variablelist"><dl><dt><span class="term">asynchronous</span></dt><dd><p>
                    Save a subscription, and receive updates on a certain schedule.
                    </p></dd><dt><span class="term">synchronous</span></dt><dd><p>
                    Save a subscription and invoke the get_Subscription and get a synchronous reply.
                    </p></dd></dl></div><p>
        The notification can be executed in a synchronous and an asynchronous way. The
        asynchronous way requires a listener service to be installed on the node to which
        the notifications should be sent.
        </p></div><div class="section" title="9.2. Two node example setup: Sales and Marketing"><div class="titlepage"><div><div><h2 class="title"><a id="sect-Two_node_example"/>9.2. Two node example setup: Sales and Marketing</h2></div></div></div><p>
        In this example we are setting up a node for 'sales' and a node for 'marketing'.
        For this you need to deploy jUDDI to two different services, then you need to do
        the following setup:
        </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="proc-Two_node_example_Setup_Node1"/><p class="title"><strong>Procedure 9.1. Setup Node 1: Sales</strong></p><ol class="1"><li class="step" title="Step 1"><p>
                Create <code class="filename">juddi_custom_install_data</code>.
                </p><pre class="screen">cd juddiv3/WEB-INF/classes
mv RENAME4SALES_juddi_custom_install_data juddi_custom_install_data</pre></li><li class="step" title="Step 2"><p>
                edit: <code class="filename">webapps/juddiv3/WEB-INF/classes/juddiv3.properties</code> and set the following
                property values where 'sales' is the DNS name of your server.
                </p><pre class="programlisting">juddi.server.name=sales
juddi.server.port=8080</pre></li><li class="step" title="Step 3"><p>
                Start the server (tomcat), which will load the UDDI seed data (since this
                is the first time you're starting jUDDI, see 
                <a class="xref" href="#chap-root_seed_data" title="Chapter 5. Root Seed Data">Chapter 5, <em>Root Seed Data</em></a>)
                </p><pre class="screen">bin/startup.sh</pre></li><li class="step" title="Step 4"><p>
                Open your browser to <a class="ulink" href="http://sales:8080/juddiv3">http://sales:8080/juddiv3</a>.  You should see:
                </p><div class="figure"><a id="fig-sales_node_installation"/><div class="figure-contents"><div class="mediaobject"><img src="images/sales_node_installation.png" alt="Sales Node Installation"/></div></div><p class="title"><strong>Figure 9.1. Sales Node Installation</strong></p></div><br class="figure-break"/></li></ol></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><a id="d0e2340"/><p class="title"><strong>Procedure 9.2. Setup Node 2: Marketing</strong></p><ol class="1"><li class="step" title="Step 1"><p>
                Create <code class="filename">juddi_custom_install_data</code>.
                </p><pre class="screen">cd juddiv3/WEB-INF/classes
mv RENAME4MARKETING_juddi_custom_install_data juddi_custom_install_data</pre></li><li class="step" title="Step 2"><p>
                edit: <code class="filename">webapps/juddiv3/WEB-INF/classes/juddiv3.properties</code> and set the following
                property values where 'marketing' is the DNS name of your server.
                </p><pre class="programlisting">juddi.server.name=marketing
juddi.server.port=8080</pre></li><li class="step" title="Step 3"><p>
                Start the server (tomcat), which will load the UDDI seed data (since this
                is the first time you're starting jUDDI, see 
                <a class="xref" href="#chap-root_seed_data" title="Chapter 5. Root Seed Data">Chapter 5, <em>Root Seed Data</em></a>)
                </p><pre class="screen">bin/startup.sh</pre></li><li class="step" title="Step 4"><p>
                Open your browser to <a class="ulink" href="http://marketing:8080/juddiv3">http://marketing:8080/juddiv3</a> . 
                You should see:
                </p><div class="figure"><a id="fig-Marketing_Node_Installation"/><div class="figure-contents"><div class="mediaobject"><img src="images/marketing_node_installation.png" alt="Marketing Node Installation"/></div></div><p class="title"><strong>Figure 9.2. Marketing Node Installation</strong></p></div><br class="figure-break"/></li></ol></div><p>
        Note that we kept the root partition the same as sales and marketing are in the
        same company, however the Node Id and Name are different and reflect that this
        node is in 'sales' or 'marketing'.
        </p><p>
        Finally you will need to replace the sales server's
	<code class="filename">uddi-portlets.war/WEB-INF/classes/META-INF/uddi.xml</code>
	with <code class="filename">uddi-portlets.war/WEB-INF/classes/META-INF/uddi.xml.sales</code>.
	Then, edit the
        <code class="filename">uddi-portlets.war/WEB-INF/classes/META-INF/uddi.xml</code> and set
        the following properties:
        </p><pre class="programlisting">&lt;name&gt;default&lt;/name&gt;
&lt;properties&gt;
    &lt;property name="serverName" value="sales"/&gt;
    &lt;property name="serverPort" value="8080"/&gt;
    &lt;property name="rmiPort" value="1099"/&gt;
&lt;/properties&gt;
</pre><p>
        Log into the sales portal: <a class="ulink" href="http://sales:8080/pluto">http://sales:8080/pluto</a> with 
        username/password: sales/sales.
        </p><div class="figure"><a id="fig-sales_services"/><div class="figure-contents"><div class="mediaobject"><img src="images/sales_services.png" alt="Sales Services"/></div></div><p class="title"><strong>Figure 9.3. Sales Services</strong></p></div><br class="figure-break"/><p>
        Before logging into the marketing portal, replace marketing's 
	<code class="filename">uddi-portlet.war/WEB-INF/classes/META-INF/uddi.xml</code>
	with <code class="filename">udd-portlet.war/WEB-INF/classes/META-INF/uddi.xml.marketing</code>.    
	Then you will need to edit the
        <code class="filename">uddi-portlet.war/WEB-INF/classes/META_INF/uddi.xml</code> and set
        the following properties:
        </p><pre class="programlisting">&lt;name&gt;default&lt;/name&gt;
&lt;properties&gt;
    &lt;property name="serverName" value="marketing"/&gt;
    &lt;property name="serverPort" value="8080"/&gt;
    &lt;property name="rmiPort" value="1099"/&gt;
&lt;/properties&gt;
</pre><p>
        Now log into the marketing portal <a class="ulink" href="http://marketing:8080/pluto">http://marketing:8080/pluto</a> with
        username/password: marketing/ marketing. In the browser for the marketing node we
        should now see:
        </p><div class="figure"><a id="fig-marketing_services"/><div class="figure-contents"><div class="mediaobject"><img src="images/marketing_services.png" alt="Marketing Services"/></div></div><p class="title"><strong>Figure 9.4. Marketing Services</strong></p></div><br class="figure-break"/><p>
        Note that the subscriptionlistener is owned by the Marketing Node business (and
        not the Root Marketing Node). The Marketing Node Business is managed by the
        marketing publisher.
        </p></div><div class="section" title="9.3. Deploy the HelloSales Service"><div class="titlepage"><div><div><h2 class="title"><a id="sect-deploy_HelloSales_service"/>9.3. Deploy the HelloSales Service</h2></div></div></div><p>
        The sales department developed a service called HelloSales. The HelloSales service
        is provided in the <code class="filename">juddiv3-samples.war</code>, and it is annotated
        so that it will auto-register. Before deploying the war, edit the
        <code class="filename">juddiv3-samples.war/WEB-INF/classes/META-INF/uddi.xml</code> file to
        set some property values to 'sales'.
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1" ?&gt;
&lt;uddi&gt;
    &lt;reloadDelay&gt;5000&lt;/reloadDelay&gt;
    &lt;manager name="example-manager"&gt;
        &lt;nodes&gt;
            &lt;node&gt;
                &lt;name&gt;default&lt;/name&gt;
                &lt;description&gt;Sales jUDDI node&lt;/description&gt;  
                &lt;properties&gt;
                    &lt;property name="serverName"  value="sales"/&gt;
                    &lt;property name="serverPort"  value="8080"/&gt;
                    &lt;property name="keyDomain"   value="sales.apache.org"/&gt;
                    &lt;property name="department"  value="sales" /&gt;
                &lt;/properties&gt;
                &lt;proxyTransport&gt;
                    org.apache.juddi.v3.client.transport.InVMTransport
                &lt;/proxyTransport&gt;
                &lt;custodyTransferUrl&gt;
                    org.apache.juddi.api.impl.UDDICustodyTransferImpl
                &lt;/custodyTransferUrl&gt;
                &lt;inquiryUrl&gt;org.apache.juddi.api.impl.UDDIInquiryImpl&lt;/inquiryUrl&gt;
                &lt;publishUrl&gt;org.apache.juddi.api.impl.UDDIPublicationImpl&lt;/publishUrl&gt;
                &lt;securityUrl&gt;org.apache.juddi.api.impl.UDDISecurityImpl&lt;/securityUrl&gt;
                &lt;subscriptionUrl&gt;
                    org.apache.juddi.api.impl.UDDISubscriptionImpl
                &lt;/subscriptionUrl&gt;
                &lt;subscriptionListenerUrl&gt;
                    org.apache.juddi.api.impl.UDDISubscriptionListenerImpl
                &lt;/subscriptionListenerUrl&gt;
                &lt;juddiApiUrl&gt;org.apache.juddi.api.impl.JUDDIApiImpl&lt;/juddiApiUrl&gt;
            &lt;/node&gt;
        &lt;/nodes&gt;
    &lt;/manager&gt;
&lt;/uddi&gt;</pre><p>
        Now deploy the <code class="filename">juddiv3-samples.war</code> to the sales registry
        node, by building the <code class="filename">juddiv3-samples.war</code> and deploying. The
        HelloWorld service should deploy
        </p><div class="figure"><a id="fig-Registration_Annotation"/><div class="figure-contents"><div class="mediaobject"><img src="images/registration_by_annotation.png" alt="Registration by Annotation, deploying the juddi-samples.war to the sales Node"/></div></div><p class="title"><strong>Figure 9.5. Registration by Annotation, deploying the <code class="filename">juddi-samples.war</code> to the sales Node</strong></p></div><br class="figure-break"/><p>
        On the Marketing UDDI we'd like to subscribe to the HelloWord service, in the
        Sales UDDI Node. As mentioned before there are two ways to do this; synchronously
        and asynchronously.
        </p></div><div class="section" title="9.4. Configure a user to create Subscriptions"><div class="titlepage"><div><div><h2 class="title"><a id="sect-config_user_create_subscription"/>9.4. Configure a user to create Subscriptions</h2></div></div></div><p>
        For a user to create and save subscriptions the publisher needs to have a valid
        login to both the sales and the marketing node. Also if the marketing publisher is
        going to create registry objects in the marketing node, the marketing publisher
        needs to own the sales keygenerator tModel. Check the
        <code class="filename">marketing_*.xml</code> files in the root seed data of both the
        marketing and sales node, if you want to learn more about this. It is important to
        understand that the 'marketing' publisher in the marketing registry owns the
        following tModels:
        </p><pre class="programlisting">&lt;save_tModel xmlns="urn:uddi-org:api_v3"&gt;

    &lt;tModel tModelKey="uddi:marketing.apache.org:keygenerator" xmlns="urn:uddi-org:api_v3"&gt;
        &lt;name&gt;marketing-apache-org:keyGenerator&lt;/name&gt;
        &lt;description&gt;Marketing domain key generator&lt;/description&gt;
        &lt;overviewDoc&gt;
            &lt;overviewURL useType="text"&gt;
                http://uddi.org/pubs/uddi_v3.htm#keyGen
            &lt;/overviewURL&gt;
        &lt;/overviewDoc&gt;
        &lt;categoryBag&gt;
            &lt;keyedReference tModelKey="uddi:uddi.org:categorization:types" 
                keyName="uddi-org:types:keyGenerator"
                keyValue="keyGenerator" /&gt;
        &lt;/categoryBag&gt;
    &lt;/tModel&gt;
    
    &lt;tModel tModelKey="uddi:marketing.apache.org:subscription:keygenerator" 
        xmlns="urn:uddi-org:api_v3"&gt;
        &lt;name&gt;marketing-apache-org:subscription:keyGenerator&lt;/name&gt;
        &lt;description&gt;Marketing Subscriptions domain key generator&lt;/description&gt;
        &lt;overviewDoc&gt;
            &lt;overviewURL useType="text"&gt;
                http://uddi.org/pubs/uddi_v3.htm#keyGen
            &lt;/overviewURL&gt;
        &lt;/overviewDoc&gt;
        &lt;categoryBag&gt;
            &lt;keyedReference tModelKey="uddi:uddi.org:categorization:types" 
                keyName="uddi-org:types:keyGenerator"
                keyValue="keyGenerator" /&gt;
        &lt;/categoryBag&gt;
    &lt;/tModel&gt;

    &lt;tModel tModelKey="uddi:sales.apache.org:keygenerator" xmlns="urn:uddi-org:api_v3"&gt;
        &lt;name&gt;sales-apache-org:keyGenerator&lt;/name&gt;
        &lt;description&gt;Sales Root domain key generator&lt;/description&gt;
        &lt;overviewDoc&gt;
            &lt;overviewURL useType="text"&gt;
                http://uddi.org/pubs/uddi_v3.htm#keyGen
            &lt;/overviewURL&gt;
        &lt;/overviewDoc&gt;
        &lt;categoryBag&gt;
            &lt;keyedReference tModelKey="uddi:uddi.org:categorization:types" 
                keyName="uddi-org:types:keyGenerator"
                keyValue="keyGenerator" /&gt;
        &lt;/categoryBag&gt;
    &lt;/tModel&gt;
&lt;/save_tModel&gt;</pre><p>
        If we are going to user the marketing publisher to subscribe to updates in the
        sales registry, then we need to provide this publisher with two clerks in the
        <code class="filename">uddi.xml</code> of the <code class="filename">uddi-portlet.war</code>.
		</p><pre class="programlisting">&lt;clerks registerOnStartup="false"&gt;
    &lt;clerk  name="MarketingCratchit"    node="default" 
            publisher="marketing"       password="marketing"/&gt;

    &lt;clerk  name="SalesCratchit"        node="sales-ws"   
            publisher="marketing"       password="marketing"/&gt;
    &lt;!--  optional 
    &lt;xregister&gt;
        &lt;servicebinding 
            entityKey="uddi:marketing.apache.org:servicebindings-subscriptionlistener-ws" 
            fromClerk="MarketingCratchit" toClerk="SalesCratchit"/&gt;
    &lt;/xregister&gt;
    --&gt;
&lt;/clerks&gt;
</pre><p>
        Here we created two clerks for this publisher called 'MarketingCratchit' and
        'SalesCratchit'. This will allow the publisher to check the existing subscriptions
        owned by this publisher in each of the two systems.
        </p></div><div class="section" title="9.5. Synchronous Notifications"><div class="titlepage"><div><div><h2 class="title"><a id="sect-synchronous_notifications"/>9.5. Synchronous Notifications</h2></div></div></div><p>
        While being logged in as the marketing publisher on the marketing portal, we
        should see the following when selecting the UDDISubscription Portlet.
        </p><div class="figure"><a id="fig-Subscriptions_a_both_nodes_up_b_sales_node_is_down"/><div class="figure-contents"><div class="mediaobject"><img src="images/a_bothup_b_sales_down.png" alt="Subscriptions. In (a) both nodes are up while in (b) the sales node is down"/></div></div><p class="title"><strong>Figure 9.6. Subscriptions. In (a) both nodes are up while in (b) the sales node is down</strong></p></div><br class="figure-break"/><p>
        When both nodes came up green you can lick on the 'new subscription' icon in the
        toolbar. Since we are going to use this subscription synchronously only the
        Binding Key and Notification Interval should be left blank, as shown in 
        <a class="xref" href="#fig-create_a_new_subscription" title="Figure 9.7. Create a New Subscription">Figure 9.7, “Create a New Subscription”</a>. Click the save icon to save the
        subscription.
        </p><div class="figure"><a id="fig-create_a_new_subscription"/><div class="figure-contents"><div class="mediaobject"><img src="images/create_new_subscription.png" alt="Create a New Subscription"/></div></div><p class="title"><strong>Figure 9.7. Create a New Subscription</strong></p></div><br class="figure-break"/><p>
        Make sure that the subscription Key uses the convention of the keyGenerator of the
        marketing publisher. You should see the orange subscription icon appear under the
        “sales-ws” UDDI node.
        </p><div class="figure"><a id="fig-newly_saved_subscription"/><div class="figure-contents"><div class="mediaobject"><img src="images/newly_saved_subscription.png" alt="A Newly Saved Subscription"/></div></div><p class="title"><strong>Figure 9.8. A Newly Saved Subscription</strong></p></div><br class="figure-break"/><p>
        To invoke a synchronous subscription, click the icon with the green arrows. This
        will give you the opportunity to set the coverage period.
        </p><div class="figure"><a id="fig-set_coverage_period"/><div class="figure-contents"><div class="mediaobject"><img src="images/set_coverage_period.png" alt="Set the Coverage Period"/></div></div><p class="title"><strong>Figure 9.9. Set the Coverage Period</strong></p></div><br class="figure-break"/><p>
        Click the green arrows icon again to invoke the synchronous subscription request.
        The example finder request will go out to the sales node and look for updates on
        the HelloWorld service. The raw XML response will be posted in the
        UDDISubscriptionNotification Portlet.
        </p><div class="figure"><a id="fig-RawXML_response_of_the_synchronous_Subscription_request"/><div class="figure-contents"><div class="mediaobject"><img src="images/raw_XML_response_synchronous_subscription_request.png" alt="The Raw XML response of the synchronous Subscription request"/></div></div><p class="title"><strong>Figure 9.10. The Raw XML response of the synchronous Subscription request</strong></p></div><br class="figure-break"/><p>
        The response will also be consumed by the marketing node. The marketing node will
        import the HelloWorld subscription information, as well as the sales business. So
        after a successful sync you should now see three businesses in the Browser Portlet
        of the marketing node, see <a class="xref" href="#fig-registry_info_HelloWorld" title="Figure 9.11. The registry info of the HelloWorld Service information was imported by the subscription mechanism.">Figure 9.11, “The registry info of the HelloWorld Service information was imported by the subscription mechanism.”</a>.
        </p><div class="figure"><a id="fig-registry_info_HelloWorld"/><div class="figure-contents"><div class="mediaobject"><img src="images/registry_info_helloworld.png" alt="The registry info of the HelloWorld Service information was imported by the subscription mechanism."/></div></div><p class="title"><strong>Figure 9.11. The registry info of the HelloWorld Service information was imported by the subscription mechanism.</strong></p></div><br class="figure-break"/></div></div><div class="chapter" title="Chapter 10. Administration"><div class="titlepage"><div><div><h2 class="title"><a id="chap-Administration"/>Chapter 10. Administration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-admin_intro">10.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-changing_listener_port">10.2. Changing the Listener Port</a></span></dt><dt><span class="section"><a href="#sect-changing_oracle_sequence_name">10.3. Changing the Oracle Sequence name</a></span></dt><dt><span class="section"><a href="#sect-persistence">10.4. Persistence</a></span></dt></dl></div><div class="section" title="10.1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="sect-admin_intro"/>10.1. Introduction</h2></div></div></div><p>
        General Stuff about administration.
        </p></div><div class="section" title="10.2. Changing the Listener Port"><div class="titlepage"><div><div><h2 class="title"><a id="sect-changing_listener_port"/>10.2. Changing the Listener Port</h2></div></div></div><p>
        If you want to change the port Tomcat listens on to something non-standard
        (something other than 8080):
        </p><div class="variablelist"><dl><dt><span class="term">jUDDI Server</span></dt><dd><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li class="step" title="Step 1"><p>
                            edit <code class="filename">conf/server.xml</code> and change the port
                            within the <code class="code">&lt;Connector&gt;</code> element
                            </p></li><li class="step" title="Step 2"><p>
                            edit
                            <code class="filename">webapps/juddiv3/WEB-INF/classes/juddiv3.properties</code>
                            and change the port number
                            </p></li></ol></div></dd><dt><span class="term">jUDDI Portal</span></dt><dd><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="procedure"><ol class="1"><li class="step" title="Step 1"><p>
                            edit
                            <code class="filename">webapps/uddi-portlets/WEB-INF/classes/META-INF/uddi.xml</code>
                            and change the port numbers within the endpoint URLs
                            </p></li><li class="step" title="Step 2"><p>
                            edit <code class="filename">pluto/WEB-INF/classes/server.xml</code> and
                            change the port within the <code class="code">&lt;Connector&gt;</code>
                            element
                            </p></li></ol></div></dd></dl></div></div><div class="section" title="10.3. Changing the Oracle Sequence name"><div class="titlepage"><div><div><h2 class="title"><a id="sect-changing_oracle_sequence_name"/>10.3. Changing the Oracle Sequence name</h2></div></div></div><p>
	If you are using Hibernate as a persistence layer for jUDDI, then Oracle will generate a default sequence for you ("HIBERNATE_SEQUENCE").     If you are using hibernate elsewhere, you may wish to change the sequence name so that you do not share this sequence with any other applications.    If other applications try to manually create the default hibernate sequence, you may even run into situations where you find conflicts or a race condition.   
        </p><p>
	The easiest way to handle this is to create an <code class="filename">orm.xml</code> file and place it within the classpath in a META-INF directory, which will override the jUDDI persistence annotations and will allow you to specify a specific sequence name for use with jUDDI.   The following <code class="filename">orm.xml</code> specifies a "juddi_sequence" sequence to be used with jUDDI.   
	</p><pre class="programlisting">&lt;entity-mappings
  xmlns="http://java.sun.com/xml/ns/persistence/orm"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd"
  version="1.0"&gt;
  
  &lt;sequence-generator name="juddi_sequence" sequence-name="juddi_sequence"/&gt;

  &lt;entity class="org.apache.juddi.model.Address"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.AddressLine"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.BindingDescr"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.BusinessDescr"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.BusinessIdentifier"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.BusinessName"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.CategoryBag"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.Contact"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.ContactDescr"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.DiscoveryUrl"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.Email"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.InstanceDetailsDescr"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.InstanceDetailsDocDescr"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

 &lt;entity class="org.apache.juddi.model.KeyedReference"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.KeyedReferenceGroup"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.OverviewDoc"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.OverviewDocDescr"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.PersonName"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.Phone"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.ServiceDescr"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.ServiceName"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.SubscriptionMatch"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.TmodelDescr"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.TmodelIdentifier"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.TmodelInstanceInfo"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.TmodelInstanceInfoDescr"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.TransferTokenKey"&gt;
    &lt;attributes&gt;
      &lt;id name="id"&gt;
        &lt;generated-value generator="juddi_sequence" strategy="AUTO"/&gt;
      &lt;/id&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;

  &lt;entity class="org.apache.juddi.model.BindingTemplate"&gt;
    &lt;attributes&gt;
      &lt;basic name="accessPointUrl"&gt;
        &lt;column name="access_point_url" length="4000"/&gt;
      &lt;/basic&gt;
    &lt;/attributes&gt;
  &lt;/entity&gt;
&lt;/entity-mappings&gt;
</pre></div><div class="section" title="10.4. Persistence"><div class="titlepage"><div><div><h2 class="title"><a id="sect-persistence"/>10.4. Persistence</h2></div></div></div><p>jUDDI supports both OpenJPA and Hibernate as persistence providers.   If you are embedding jUDDI, it is important to note that there are two JARs provided through maven.    If you will be using Hibernate, please use the juddi-core JAR, if you are using OpenJPA, use juddi-core-openjpa.
	</p><p>The difference between these JARs is that the persistence classes within juddi-core-openjpa have been enhanced (http://people.apache.org/~mprudhom/openjpa/site/openjpa-project/manual/ref_guide_pc_enhance.html).   Unfortunately, the Hibernate classloader does not deal well with these enhanced classes, so it it important to note not to use the juddi-core-openjpa JAR with Hibernate.
	</p></div></div><div class="chapter" title="Chapter 11. Deploying to JBoss 6.0.0.GA"><div class="titlepage"><div><div><h2 class="title"><a id="chap-deployjboss"/>Chapter 11. Deploying to JBoss 6.0.0.GA</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-deployjboss">11.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-juddi-war">11.2. Add juddiv3.war</a></span></dt><dt><span class="section"><a href="#sect-web.xml">11.3. Change web.xml</a></span></dt><dt><span class="section"><a href="#sect-datasource">11.4. Configure Datasource</a></span></dt></dl></div><div class="section" title="11.1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="sect-deployjboss"/>11.1. Introduction</h2></div></div></div><p>
	This section describes how to deploy juddi to JBoss 6.0.0.GA.     
        </p><p>
	First, download jboss-6.0.0.GA - the zip or tar.gz bundle may be found 
at http://www.jboss.org/jbossas/downloads/.      Download the bundle and uncompress it.
        </p></div><div class="section" title="11.2. Add juddiv3.war"><div class="titlepage"><div><div><h2 class="title"><a id="sect-juddi-war"/>11.2. Add juddiv3.war</h2></div></div></div><p>
	Copy juddiv3.war to server/default/deploy and unpack it.
	</p><p>
	Insert <code class="filename">jboss-web.xml</code> into the juddiv3.war/WEB-INF directory , should look like the following :
	</p><pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;

&lt;!DOCTYPE jboss-web PUBLIC 
	"-//JBoss//DTD Web Application 2.3V2//EN"
    "http://www.jboss.org/j2ee/dtd/jboss-web_3_2.dtd"&gt;

&lt;jboss-web&gt;

    &lt;resource-ref&gt;
        &lt;res-ref-name&gt;jdbc/JuddiDS&lt;/res-ref-name&gt;
        &lt;jndi-name&gt;java:JuddiDS&lt;/jndi-name&gt;
    &lt;/resource-ref&gt;
    &lt;depends&gt;jboss.jdbc:datasource=JuddiDS,service=metadata&lt;/depends&gt;

&lt;/jboss-web&gt;
</pre><p>	
	</p></div><div class="section" title="11.3. Change web.xml"><div class="titlepage"><div><div><h2 class="title"><a id="sect-web.xml"/>11.3. Change web.xml</h2></div></div></div><p>
	Replace the WEB-INF/web.xml with the jbossws-native-web.xml within docs/examples/appserver.
        </p></div><div class="section" title="11.4. Configure Datasource"><div class="titlepage"><div><div><h2 class="title"><a id="sect-datasource"/>11.4. Configure Datasource</h2></div></div></div><p>
	The first step for configuring a datasource is to copy your JDBC driver into the classpath.    Copy your JDBC driver into <code class="filename">${jboss.home.dir}/server/${configuration}/lib</code>, where configuration is the profile you wish to start with (default, all, etc.). 

	Example : 
	</p><pre class="programlisting">cp mysql-connector-java-5.0.8-bin.jar /opt/jboss-5.1.0.GA/server/default/lib</pre><p> 
        </p><p>
	Next, configure a JBoss datasource file for your db.   Listed below is an example datasource for MySQL :	
        </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;datasources&gt;
 &lt;local-tx-datasource&gt;
   &lt;jndi-name&gt;JuddiDS&lt;/jndi-name&gt;
   &lt;connection-url&gt;jdbc:mysql://localhost:3306/juddiv3&lt;/connection-url&gt;
   &lt;driver-class&gt;com.mysql.jdbc.Driver&lt;/driver-class&gt;
   &lt;user-name&gt;root&lt;/user-name&gt;
   &lt;password&gt;&lt;/password&gt;
   &lt;exception-sorter-class-name&gt;org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter&lt;/exception-sorter-class-name&gt;

   &lt;!-- corresponding type-mapping in the standardjbosscmp-jdbc.xml (optional) --&gt;
   &lt;metadata&gt;
      &lt;type-mapping&gt;mySQL&lt;/type-mapping&gt;
   &lt;/metadata&gt;
 &lt;/local-tx-datasource&gt;
&lt;/datasources&gt;
</pre><p>
	Next, make a few changes to the <code class="filename">juddiv3.war/classes/META-INF/persistence.xml</code>. 
	
	Change the "hibernate.dialect" property to match the database you have chosen for persistence.      For MySQL, change the value of hibernate.dialect to "org.hibernate.dialect.MySQLDialect".     A full list of dialects available can be found in the hibernate documentation (https://www.hibernate.org/hib_docs/v3/api/org/hibernate/dialect/package-summary.html).  

	Next, change the &lt;jta-data-source&gt; tags so that it reads &lt;non-jta-data-source&gt;, and change the value from java:comp/env/jdbc/JuddiDS to java:/JuddiDS.
        </p></div></div><div class="chapter" title="Chapter 12. Deploying to Glassfish 2.1.1"><div class="titlepage"><div><div><h2 class="title"><a id="chap-deployglassfish"/>Chapter 12. Deploying to Glassfish 2.1.1</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="#sect-deployglassfish">12.1. Introduction</a></span></dt><dt><span class="section"><a href="#sect-glassfish-jars">12.2. Glassfish jars</a></span></dt><dt><span class="section"><a href="#sect-juddi-ds">12.3. Configure the JUDDI datasource</a></span></dt><dt><span class="section"><a href="#sect-glassfish-juddi-war">12.4. Add juddiv3-cxf.war</a></span></dt><dt><span class="section"><a href="#sect-run">12.5. Run juddi</a></span></dt></dl></div><div class="section" title="12.1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="sect-deployglassfish"/>12.1. Introduction</h2></div></div></div><p> This section describes how to deploy juddi to Glassfish 2.1.1.
			These instructions will use CXF as a webservice framework.</p><p>
			First, download the glassfish-v2.1.1 installer JAR. Once
			downloaded,install using the JAR and then run the ant setup script :
			</p><pre class="programlisting">
java -jar glassfish-installer-v2.1.1-b31g-linux.jar
cd glassfish
ant -f setup.xml
</pre><p>
		</p></div><div class="section" title="12.2. Glassfish jars"><div class="titlepage"><div><div><h2 class="title"><a id="sect-glassfish-jars"/>12.2. Glassfish jars</h2></div></div></div><p>
			Copy the following JARs into domains/domain1/lib/ext. Note that for
			the purposes of this example, we have copied the MySQL driver to
			<code class="filename">domains/domain1/lib/ext</code>
			:
			</p><pre class="programlisting">
antlr-2.7.6.jar
cglib-nodep-2.1_3.jar
commons-collections-3.2.1.jar
commons-logging-1.1.jar
dom4j-1.6.1.jar
hibernate-3.2.5.ga.jar
hibernate-annotations-3.3.0.ga.jar
hibernate-commons-annotations-3.0.0.ga.jar
hibernate-entitymanager-3.3.1.ga.jar
hibernate-validator-3.0.0.ga.jar
javassist-3.3.ga.jar
jboss-common-core-2.0.4.GA.jar
jta-1.0.1B.jar
mysql-connector-java-5.0.8-bin.jar
persistence-api-1.0.jar
</pre><p>
		</p></div><div class="section" title="12.3. Configure the JUDDI datasource"><div class="titlepage"><div><div><h2 class="title"><a id="sect-juddi-ds"/>12.3. Configure the JUDDI datasource</h2></div></div></div><p>
			First, using the asadmin administration tool, import the following
			file :
			</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE resources PUBLIC "-//Sun Microsystems Inc.//DTD Application Server 9.0 Domain//EN" "*&lt;install directory&gt;/lib/dtds/sun-resources_1_3.dtd*"&gt;
&lt;resources&gt;
&lt;jdbc-connection-pool name="mysql-pool" datasource-classname="com.mysql.jdbc.jdbc2.optional.MysqlDataSource" res-type="javax.sql.DataSource"&gt;
&lt;property name="user" value="juddi"/&gt;
&lt;property name="password" value="juddi"/&gt;
&lt;property name="url" value="jdbc:mysql://localhost:3306/juddiv3"/&gt;
&lt;/jdbc-connection-pool&gt;
&lt;jdbc-resource enabled="true" jndi-name="jdbc/mysql-resource" object-type="user" pool-name="mysql-pool"/&gt;
&lt;/resources&gt;
</pre><p>
			</p><pre class="programlisting">
	asadmin add-resources resource.xml
	</pre><p>
			Then use the Glassfish administration console to create a
			"jdbc/juddiDB" JDBC datasource resource based on the mysql-pool
			Connection Pool.
		</p></div><div class="section" title="12.4. Add juddiv3-cxf.war"><div class="titlepage"><div><div><h2 class="title"><a id="sect-glassfish-juddi-war"/>12.4. Add juddiv3-cxf.war</h2></div></div></div><p>
			Unzip the juddiv3-cxf WAR into
			<code class="filename">domains/domain1/autodeploy/juddiv3.war
			</code>
			.
		</p><p>
			Add a
			<code class="filename">sun-web.xml</code>
			file into juddiv3.war/WEB-INF. Make sure that the JNDI references
			matches the JNDI location you configured in the Glassfish
			administration console.
			</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE sun-web-app PUBLIC '-//Sun Microsystems, Inc.//DTD 
Application Server 9.0 Servlet 2.5//EN' 
'http://www.sun.com/software/appserver/dtds/sun-web-app_2_5-0.dtd'&gt;
&lt;sun-web-app&gt;
&lt;resource-ref&gt;
&lt;res-ref-name&gt;jdbc/juddiDB&lt;/res-ref-name&gt;
&lt;jndi-name&gt;jdbc/juddiDB&lt;/jndi-name&gt;
&lt;/resource-ref&gt;
&lt;/sun-web-app&gt;
</pre><p>
		</p><p>
			Next, make a few changes to
			<code class="filename">juddiv3.war/WEB-INF/classes/META-INF/persistence.xml
			</code>.
			Change the "hibernate.dialect" property to match the database that
			you have chosen for persistence. For MySQL, change the value of
			hibernate.dialect to "org.hibernate.dialect.MySQLDialect". A full
			list of dialects available can be found in the hibernate
			documentation
			(https://www.hibernate.org/hib_docs/v3/api/org/hibernate/dialect/package-summary.html).
			Next, change the &lt;jta-data-source&gt; change the value from java:comp/env/jdbc/JuddiDS to java:comp/env/jdbc/JuddiDB.

	</p></div><div class="section" title="12.5. Run juddi"><div class="titlepage"><div><div><h2 class="title"><a id="sect-run"/>12.5. Run juddi</h2></div></div></div><p>
	Start up the server :
	</p><pre class="programlisting">
cd bin
asadmin start-domain domain1
        </pre><p>
	
	Once the server is deployed, browse to <a class="ulink" href="http://localhost:8080/juddiv3">http://localhost:8080/juddiv3</a>
	</p></div></div><div class="appendix" title="Appendix A. Revision History"><div class="titlepage"><div><div><h2 class="title"><a id="appe-Publican-Revision_History"/>Appendix A. Revision History</h2></div></div></div><p>
		<div class="revhistory"><table border="0" width="100%" summary="Revision history"><tr><th align="left" valign="top" colspan="3"><strong>Revision History</strong></th></tr><tr><td align="left">Revision 1.1</td><td align="left">Thu Jan 07 2010</td><td align="left"><span class="author"><span class="firstname">Tom</span> <span class="surname">Cunningham</span></span></td></tr><tr><td align="left" colspan="3">
			<table border="0" summary="Simple list" class="simplelist"><tr><td>Translated Dev Guide to docbook</td></tr></table>
			</td></tr><tr><td align="left">Revision 1.0</td><td align="left">Mon Nov 16 2009</td><td align="left"><span class="author"><span class="firstname">Darrin</span> <span class="surname">Mison</span></span></td></tr><tr><td align="left" colspan="3">
                    	<table border="0" summary="Simple list" class="simplelist"><tr><td>Created from community jUDDI Guide</td></tr></table>
                	</td></tr></table></div>
	</p></div></div></body></html>